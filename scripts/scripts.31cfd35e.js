"use strict";angular.module("clicheApp",["ngResource","ngRoute","ui.bootstrap","ngPrettyJson","LocalForageModule"]).config(["$routeProvider","$httpProvider","$localForageProvider",function(a,b,c){a.when("/",{templateUrl:"views/home.html",controller:"HomeCtrl"}).otherwise({redirectTo:"/"}),b.interceptors.push("HTTPInterceptor"),c.config({name:"clicheApp",version:1,storeName:"clicheDB"})}]),angular.module("clicheApp").run(["$templateCache",function(a){a.put("views/enum/enum-file.html",'<ng-form name="inputForm" class="input-property"><div class="enum-field form-group form-group-file" ng-class="{\'has-error\': inputForm.enumFile.$invalid}"><input type="string" class="form-control" name="enumFile" ng-model="item.value.path" placeholder="Enter Value" ng-required="isRequired"></div></ng-form>'),a.put("views/enum/enum-number.html",'<ng-form name="inputForm" class="input-property"><div class="enum-field form-group form-group-file" ng-class="{\'has-error\': inputForm.enumNumber.$invalid}"><input type="number" class="form-control" name="enumNumber" ng-model="item.value" placeholder="Enter Value" ng-required="isRequired"></div></ng-form>'),a.put("views/enum/enum-object.html",'<div class="enum-field form-group form-group-object"><input-field ng-repeat="(innerKey, property) in properties" ng-model="item.value[innerKey]" key="{{ innerKey }}" prop="property" form="form"></input-field></div>'),a.put("views/enum/enum-string.html",'<ng-form name="inputForm" class="input-property"><div class="enum-field form-group form-group-file" ng-class="{\'has-error\': inputForm.enumString.$invalid}"><input type="string" class="form-control" name="enumString" ng-model="item.value" placeholder="Enter Value" ng-required="isRequired"></div></ng-form>'),a.put("views/home.html",'<div ng-class="$parent.view.classes" loading="view.loading"><div class="col" ng-class="{\'col-md-7\': view.showTrace, \'col-md-12 cancel-fixed\': !view.showTrace}"><div class="heading row fixed-left"><div ng-class="{\'col-md-12\': view.showTrace, \'col-md-8 col-md-offset-2\': !view.showTrace}"><ul class="nav nav-tabs nav-tabs-steps regular"><li class="logo"><a ng-href="#/"><span>cli</span>che</a></li><li ng-class="{active: view.tab === \'general\'}"><a href ng-click="switchTab(\'general\')">General</a></li><li ng-class="{active: view.tab === \'inputs\'}"><a href ng-click="switchTab(\'inputs\')">Inputs</a></li><li ng-class="{active: view.tab === \'outputs\'}"><a href ng-click="switchTab(\'outputs\')">Outputs</a></li><li ng-class="{active: view.tab === \'adapter\'}"><a href ng-click="switchTab(\'adapter\')">Adapter</a></li><li ng-class="{active: view.tab === \'values\'}"><a href ng-click="switchTab(\'values\')">Values</a></li><li class="pull-right"><a href ng-click="toggleTrace()" class="toggle-trace" tooltip="{{ view.showTrace ? \'hide\' : \'show\' }} trace" tooltip-append-to-body="true" tooltip-placement="right"><i class="glyphicon" ng-class="{\'glyphicon-pause\': view.showTrace, \'glyphicon-play\': !view.showTrace}"></i></a></li></ul><ul class="nav nav-tabs nav-tabs-steps mobile"><li class="logo"><a ng-href="#/"><span>cli</span>che</a></li><li ng-class="{active: view.tab === \'general\'}"><a href ng-click="switchTab(\'general\')">G</a></li><li ng-class="{active: view.tab === \'inputs\'}"><a href ng-click="switchTab(\'inputs\')">I</a></li><li ng-class="{active: view.tab === \'outputs\'}"><a href ng-click="switchTab(\'outputs\')">O</a></li><li ng-class="{active: view.tab === \'adapter\'}"><a href ng-click="switchTab(\'adapter\')">A</a></li><li ng-class="{active: view.tab === \'values\'}"><a href ng-click="switchTab(\'values\')">V</a></li><li class="pull-right"><a href ng-click="toggleTrace()" class="toggle-trace"><i class="glyphicon" ng-class="{\'glyphicon-pause\': view.showTrace, \'glyphicon-play\': !view.showTrace}"></i></a></li></ul></div></div><!-- # .heading --><div class="row"><div ng-class="{\'col-md-12\': view.showTrace, \'col-md-8 col-md-offset-2\': !view.showTrace}"><ng-form class="form" name="forms.toolForm" role="form" novalidate><div class="tabs left"><ng-include src="view.tabViewPath"></ng-include></div></ng-form></div></div></div><div class="col col-md-5" ng-show="view.showTrace"><div class="heading fixed-right"><ul class="nav nav-tabs nav-tabs-trace"><li class="pull-right" ng-class="{active: view.trace === \'console\'}"><a href ng-click="switchTrace(\'console\')">Console</a></li><li class="pull-right" ng-class="{active: view.trace === \'job\'}"><a href ng-click="switchTrace(\'job\')">Job JSON</a></li><li class="pull-right" ng-class="{active: view.trace === \'tool\'}"><a href ng-click="switchTrace(\'tool\')">Tool JSON</a></li></ul></div><div class="tabs right" ng-switch="view.trace"><div class="tab" ng-switch-when="tool"><pre class="json-trace" pretty-json="view.toolForm"></pre></div><div class="tab" ng-switch-when="job"><pre class="json-trace" pretty-json="view.jobForm"></pre></div><div class="tab" ng-switch-when="console"><pre class="console-trace">{{ view.command }}</pre></div></div></div></div>'),a.put("views/inputs/input-array.html",'<div class="form-group" ng-class="{required: prop.required, \'has-error\': ((view.input.length < prop.minItems && prop.minItems > 0) || (view.input.length > prop.maxItems && prop.maxItems > 0))}"><label class="control-label">{{ key }} <span ng-if="prop.minItems || prop.maxItems">(<strong ng-if="prop.minItems">min: {{ prop.minItems }}</strong> <strong ng-if="prop.maxItems">max: {{ prop.maxItems }}</strong>)</span></label><div class="input-property-body"><enum ng-model="view.input" type="prop.items.type" min="prop.minItems" max="prop.maxItems" properties="prop.items.properties" is-required="prop.required" form="form"></enum></div></div>'),a.put("views/inputs/input-boolean.html",'<div class="form-group" ng-class="{required: prop.required, \'has-error\': inputForm.inputBoolean.$invalid}"><div class="input-property-body"><div class="checkbox"><label><input type="checkbox" name="inputBoolean" ng-model="view.input"> {{ key }}</label></div></div></div>'),a.put("views/inputs/input-file.html",'<div class="form-group" ng-class="{required: prop.required, \'has-error\': inputForm.inputFile.$invalid}"><label class="control-label">{{ key }}</label><div class="input-property-body"><input type="text" class="form-control" name="inputFile" ng-model="view.input.path" ng-required="prop.required"></div></div>'),a.put("views/inputs/input-integer.html",'<div class="form-group" ng-class="{required: prop.required, \'has-error\': inputForm.inputInteger.$invalid}"><label class="control-label">{{ key }}</label><div class="input-property-body"><input type="number" class="form-control" name="inputInteger" ng-model="view.input" ng-required="prop.required"></div></div>'),a.put("views/inputs/input-object.html",'<div class="form-group"><label class="control-label">{{ key }}</label><div class="input-property-body"><input-field ng-repeat="(innerKey, property) in prop.properties" ng-model="view.input[innerKey]" key="{{ innerKey }}" prop="property" form="form"></input-field></div></div>'),a.put("views/inputs/input-string.html",'<div class="form-group" ng-class="{required: prop.required, \'has-error\': inputForm.inputString.$invalid}"><label class="control-label">{{ key }}</label><div class="input-property-body"><input ng-show="!prop.enum" type="text" class="form-control" name="inputString" ng-model="view.input" ng-required="prop.required"><select ng-show="prop.enum" class="form-control" name="inputString" ng-model="view.input" ng-required="prop.required"><option value>-- choose --</option><option ng-repeat="option in prop.enum track by $index" value="{{ option }}">{{ (option === \'\') ? \'empty value\' : option }}</option></select></div></div>'),a.put("views/partials/add-property-arg.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()"><span>&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title">Add Argument</h4></div><div class="modal-body"><form ng-submit="addProperty()" name="view.form" novalidate><div class="row"><div class="col-md-4"><div class="form-group"><label for="value-from" class="control-label">Value From</label><select class="form-control" id="value-from" name="valueFrom" ng-change="changeValueFrom()" ng-model="view.property.valueFrom" ng-options="key as key for (key, value) in options.valuesFrom"><option value>-- none --</option></select></div></div><div class="col-md-3"><div class="form-group"><label class="control-label" for="prefix">Prefix</label><input type="text" class="form-control" id="prefix" name="prefix" ng-model="view.property.prefix"></div></div><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (view.form.separator.$invalid && view.form.$dirty)}"><label class="control-label" for="separator">Separator</label><select class="form-control" id="separator" name="separator" ng-model="view.property.separator" required><option value="">empty string</option><option value="_">space</option><option value="=">=</option></select></div></div></div><div class="row"><div class="col-md-4"><div class="form-group" ng-class="{\'has-error\': (view.form.value.$invalid && view.form.$dirty)}"><label for="value" class="control-label">Value</label><input type="text" class="form-control" id="value" name="value" ng-model="view.property.value" required></div></div><div class="col-md-2"><div class="form-group" ng-class="{\'has-error\': (view.form.order.$invalid && view.form.$dirty)}"><label for="order" class="control-label">Order</label><input type="number" class="form-control" id="order" name="order" ng-model="view.property.order"></div></div></div><div class="form-group main-actions"><a href class="btn btn-warning" ng-click="cancel()">Cancel</a> <button type="submit" class="btn btn-primary">Save</button></div></form></div>'),a.put("views/partials/add-property-input.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()"><span>&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title">Add Input Property</h4></div><div class="modal-body"><form ng-submit="addProperty()" name="view.form" novalidate><p ng-if="view.error" class="alert alert-danger">{{ view.error }}</p><div class="row"><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (view.form.name.$invalid && view.form.$dirty)}"><label class="control-label" for="name">Name</label><input type="text" class="form-control" id="name" name="name" ng-model="view.name" required></div></div><!-- END Name --><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (view.form.type.$invalid && view.form.$dirty)}"><label class="control-label" for="type">Type</label><select class="form-control" id="type" name="type" ng-model="view.property.type" required><option value="file">file</option><option value="string">string</option><option value="integer">integer</option><option value="array">array</option><option value="boolean">boolean</option></select></div></div><!-- END Type --><div class="col-md-3"><div class="form-group"><label class="control-label" for="prefix">Prefix</label><input type="text" class="form-control" id="prefix" name="prefix" ng-model="view.property.adapter.prefix"></div></div><!-- END Prefix --><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (view.form.separator.$invalid && view.form.$dirty)}"><label class="control-label" for="separator">Separator</label><select class="form-control" id="separator" name="separator" ng-model="view.property.adapter.separator" required><option value="">empty string</option><option value="_">space</option><option value="=">=</option></select></div></div><!-- END Separator --></div><div class="row"><div class="col-md-4"><div class="form-group"><label class="control-label" for="transform">Transform</label><select class="form-control" id="transform" name="transform" ng-model="view.property.adapter.transform" ng-options="transform for transform in options.platformFeatures"><option value="">-- none --</option></select></div></div><!-- END Transform --><div class="col-md-4"><div class="form-group" ng-class="{\'has-error\': (view.form.order.$invalid && view.form.$dirty)}"><label class="control-label" for="order">Order</label><input type="number" class="form-control" id="order" name="order" ng-model="view.property.adapter.order"></div></div><!-- END Order --><div class="col-md-4"><div class="form-group" ng-if="view.property.type === \'string\'"><label class="empty-label">&nbsp;</label><div class="checkbox"><label><input type="checkbox" ng-model="view.isEnum" ng-change="toggleEnum()"> Enum</label></div></div></div><!-- END Eum --><div class="col-md-4" ng-if="view.property.type === \'file\'"><div class="form-group"><label class="empty-label">&nbsp;</label><div class="checkbox"><label><input type="checkbox" ng-model="view.property.adapter.streamable"> Streamable</label></div></div></div><!-- END Streamable --></div><div class="row" ng-if="view.property.type === \'array\'"><div class="col-md-2"><div class="form-group" ng-class="{\'has-error\': (view.form.min.$invalid && view.form.$dirty)}"><label class="control-label" for="min" class="control-label">Min</label><input type="number" class="form-control" id="min" name="min" ng-model="view.property.minItems" min="0"></div></div><!-- END Min --><div class="col-md-2"><div class="form-group" ng-class="{\'has-error\': (view.form.max.$invalid && view.form.$dirty)}"><label class="control-label" for="max" class="control-label">Max</label><input type="number" class="form-control" id="max" name="max" ng-model="view.property.maxItems" min="0"></div></div><!-- END Max --><div class="col-md-4"><div class="form-group"><label class="control-label" for="item-type" class="control-label">Item Type</label><select class="form-control" id="item-type" name="itemType" ng-model="view.property.items.type"><option value="">-- choose --</option><option value="string">string</option><option value="number">number</option><option value="file">file</option></select></div></div><!-- END Item Type --><div class="col-md-4"><div class="form-group"><label class="control-label" for="item-separator" class="control-label">Item Separator</label><select class="form-control" id="item-separator" name="itemSeparator" ng-model="view.property.adapter.listSeparator"><option value="">-- choose --</option><option value=",">,</option><option value=";">;</option><option value="_">space</option><option value="repeat">repeat</option></select></div></div><!-- END Item Separator --></div><div class="row" ng-if="view.property.type === \'array\' && view.property.items.type === \'file\'"><div class="col-md-4"><div class="form-group"><label class="control-label" for="item-transform" class="control-label">Item Transform</label><select class="form-control" id="item-transform" name="item-transform" ng-model="view.property.adapter.listTransform" ng-options="transform for transform in options.platformFeatures"><option value="">-- none --</option></select></div></div><!-- END Transform --><div class="col-md-4"><div class="form-group"><label class="empty-label">&nbsp;</label><div class="checkbox"><label><input type="checkbox" ng-model="view.property.adapter.streamable"> Item Streamable</label></div></div></div><!-- END Item Streamable --></div><div class="row" ng-if="view.isEnum"><div class="col-md-12"><enum ng-model="view.property.enum" type="string" min="1" is-required="true"></enum></div></div><div class="form-group main-actions"><a href class="btn btn-warning" ng-click="cancel()">Cancel</a> <button type="submit" class="btn btn-primary">Save</button></div></form></div>'),a.put("views/partials/add-property-output.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()"><span>&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title">Add Output Property</h4></div><div class="modal-body"><form ng-submit="addProperty()" name="view.form" novalidate><p ng-if="view.error" class="alert alert-danger">{{ view.error }}</p><div class="row"><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (view.form.name.$invalid && view.form.$dirty)}"><label class="control-label" for="name">Name</label><input type="text" class="form-control" id="name" name="name" ng-model="view.name" required></div></div><!-- END Name --><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (view.form.type.$invalid && view.form.$dirty)}"><label class="control-label" for="type">Type</label><select class="form-control" id="type" name="type" ng-model="view.property.type" required><option value="file">file</option><option value="directory">directory</option><option value="array">array</option></select></div></div><div class="col-md-3"><div class="form-group"><label class="control-label" for="glob">Glob</label><input type="text" class="form-control" id="glob" name="glob" ng-model="view.property.glob"></div></div><div class="col-md-3" ng-if="view.property.type === \'file\'"><div class="form-group"><label class="control-label empty-label">&nbsp;</label><div class="checkbox"><label><input type="checkbox" ng-model="view.property.adapter.streamable"> Streamable</label></div></div></div></div><div class="row" ng-if="view.property.type === \'array\'"><div class="col-md-3"><div class="form-group"><label for="item-min" class="control-label">Min</label><input type="number" class="form-control" id="item-min" name="itemMin" ng-model="view.property.minItems" min="0"></div></div><!-- END Min --><div class="col-md-3"><div class="form-group"><label for="item-max" class="control-label">Max</label><input type="number" class="form-control" id="item-max" name="itemMax" ng-model="view.property.maxItems" min="0"></div></div><!-- END Max --><div class="col-md-3"><div class="form-group"><label for="item-type" class="control-label">Item Type</label><select class="form-control" id="item-type" name="itemType" ng-model="view.property.items.type"><option value>-- choose --</option><option value="file">file</option><option value="directory">directory</option></select></div></div><!-- END Item Type --><div class="col-md-2" ng-if="view.property.items.type === \'file\'"><div class="form-group"><label class="control-label empty-label">&nbsp;</label><div class="checkbox no-margin"><label><input type="checkbox" ng-model="view.property.adapter.listStreamable"> Streamable</label></div></div></div><!-- END Item Streamable --></div><div class="form-group main-actions"><a href class="btn btn-warning" ng-click="cancel()">Cancel</a> <button type="submit" class="btn btn-primary">Save</button></div></form></div>'),a.put("views/partials/argument.html",'<div class="argument-wrap" ng-class="{active: active}"><legend class="legend-tiny toggle" ng-class="{active: active}" ng-click="toggleArgument()">arg{{ name }} <span class="remove" ng-click="removeItem($event)">&times;</span></legend><div class="property-body"><div class="row"><div class="col-md-4"><div class="form-group"><label for="argument-valuefrom-{{ view.uniqueId }}" class="control-label">Value From</label><select class="form-control" id="argument-valuefrom-{{ view.uniqueId }}" name="{{ name }}-valuefrom" ng-change="changeValueFrom()" ng-model="arg.valueFrom" ng-options="key as key for (key, value) in valuesFrom"><option value>-- none --</option></select></div></div><!-- END Value From --><div class="col-md-2"><div class="form-group"><label for="argument-prefix-{{ view.uniqueId }}" class="control-label">Prefix</label><input type="text" class="form-control" id="argument-prefix-{{ view.uniqueId }}" name="{{ name }}-prefix" ng-model="arg.prefix"></div></div><!-- END Prefix --><div class="col-md-2"><div class="form-group"><label for="argument-separator-{{ view.uniqueId }}" class="control-label">Separator</label><select class="form-control" id="argument-separator-{{ view.uniqueId }}" name="{{ name }}-separator" ng-model="arg.separator"><option value="">empty string</option><option value="_">space</option><option value="=">=</option></select></div></div><!-- END Separator --><div class="col-md-2"><div class="form-group"><label for="argument-value-{{ view.uniqueId }}" class="control-label">Value</label><input type="text" class="form-control" id="argument-value-{{ view.uniqueId }}" name="{{ name }}-value" ng-model="arg.value"></div></div><!-- END Value --><div class="col-md-2"><div class="form-group"><label for="argument-order-{{ view.uniqueId }}" class="control-label">Order</label><input type="number" class="form-control" id="argument-order-{{ view.uniqueId }}" name="{{ name }}-order" ng-model="arg.order"></div></div><!-- END Order --></div></div></div>'),a.put("views/partials/confirm-delete.html",'<div class="modal-body"><h4 class="center-block">Are you sure you want to delete this item?</h4><div class="center-block"><button class="btn btn-default" ng-click="cancel()">No</button> <button class="btn btn-danger" ng-click="ok()">Yes</button></div></div>'),a.put("views/partials/enum.html",'<div class="enum-list-wrap"><a href ng-click="addItem()" class="btn btn-default add-enum-item" ng-class="{disabled: max && view.list.length >= max}"><i class="glyphicon glyphicon-plus"></i></a><div class="enum-list-container"><ul class="enum-list" ng-class="{wide: min && view.list.length <= min}"><li ng-repeat="item in view.list track by $index"><ng-include src="view.tplPath"></ng-include><a href ng-hide="min && view.list.length <= min" class="glyphicon glyphicon-remove remove-btn" ng-click="removeItem($index)"></a></li></ul><p ng-if="view.list.length === 0" class="alert alert-info">Click + on the left to add some elements</p></div></div>'),a.put("views/partials/error.html",'<div class="general-error alert alert-danger" ng-class="{show: errorMessages.length > 0}"><button type="button" class="close" ng-click="closeError()"><span>&times;</span><span class="sr-only">Close</span></button><p ng-repeat="message in errorMessages">{{ message }}</p></div>'),a.put("views/partials/input-field.html",'<ng-form name="inputForm" class="input-property"></ng-form>'),a.put("views/partials/io-file.html",'<div class="row"><div class="col-md-4"><input type="text" class="form-control" name="{{ name }}-path" ng-model="file.path" placeholder="Path" required></div><div class="col-md-4"><input type="text" class="form-control" name="{{ name }}-size" ng-model="file.size" placeholder="Size" required></div><div class="col-md-4"><input type="text" class="form-control" name="{{ name }}-checksum" ng-model="file.checksum" placeholder="Checksum" required></div></div>'),a.put("views/partials/options.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()"><span>&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title">Options</h4></div><div class="modal-body"><div class="row"><div class="col-md-6"><p>You can (re)generate your token</p><button class="btn btn-primary" ng-click="generateToken()" ng-disabled="view.generating">(Re)generate Token</button></div><div class="col-md-6"><p>You can revoke your token</p><button class="btn btn-primary" ng-click="revokeToken()" ng-disabled="view.revoking">Revoke Token</button></div></div><p ng-if="view.trace !== \'\'" class="alert alert-success">{{ view.trace }}</p></div><div class="modal-footer"><button class="btn btn-warning" ng-click="cancel()">Close</button></div>'),a.put("views/partials/property-input.html",'<div class="property-wrap" ng-class="{active: active}"><legend class="legend-tiny toggle" ng-class="{active: active}" ng-click="toggleProperty()"><div class="property-name" ng-hide="view.edit"><span>{{ name }}</span> <a href ng-click="toggleEdit($event)"><i class="glyphicon glyphicon-edit"></i></a></div><div class="property-name-form" ng-show="view.edit"><div class="input-group" ng-class="{\'has-error\': view.error}"><input type="text" class="form-control" name="name" ng-model="view.name" ng-click="stopPropagation($event)" ng-keypress="changeName($event)" placeholder="property name"> <span class="input-group-btn"><button class="btn btn-primary" ng-click="changeName($event)"><i class="glyphicon glyphicon-ok"></i></button> <button class="btn btn-default" ng-click="toggleEdit($event)"><i class="glyphicon glyphicon-remove"></i></button></span></div></div><div class="checkbox"><label><input type="checkbox" ng-model="prop.required"> required</label></div><span class="remove" ng-click="removeItem($event)">&times;</span></legend><div class="property-body"><div class="row"><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (form[name+\'-type\'].$invalid && form[name].$dirty)}" title="Type"><label for="property-input-type-{{ view.uniqueId }}" class="control-label">Type</label><select class="form-control" id="property-input-type-{{ view.uniqueId }}" name="{{ name }}-type" ng-model="prop.type"><option value="file">file</option><option value="string">string</option><option value="integer">integer</option><option value="array">array</option><option value="boolean">boolean</option></select></div></div><!-- END Type --><div class="col-md-1"><div class="form-group" title="Prefix"><label for="property-prefix-{{ view.uniqueId }}" class="control-label">Prefix</label><input type="text" class="form-control" id="property-prefix-{{ view.uniqueId }}" name="{{ name }}-prefix" ng-model="prop.adapter.prefix" ng-disabled="view.disabled"></div></div><!-- END Prefix --><div class="col-md-2"><div class="form-group" title="Separator"><label for="property-separator-{{ view.uniqueId }}" class="control-label">Separator</label><select class="form-control" id="property-separator-{{ view.uniqueId }}" name="{{ name }}-separator" ng-model="prop.adapter.separator" ng-disabled="view.disabled"><option value="">empty string</option><option value="_">space</option><option value="=">=</option></select></div></div><!-- END Separator --><div class="col-md-2"><div class="form-group" title="Transform"><label for="property-transform-{{ view.uniqueId }}" class="control-label">Transform</label><select class="form-control" id="property-transform-{{ view.uniqueId }}" name="{{ name }}-transform" ng-model="prop.adapter.transform" ng-options="transform for transform in transforms" ng-disabled="view.disabled"><option value="">-- none --</option></select></div></div><!-- END Transform --><div class="col-md-2"><div class="form-group" title="Order"><label for="property-order-{{ view.uniqueId }}" class="control-label">Order</label><input type="number" class="form-control" id="property-order-{{ view.uniqueId }}" name="{{ name }}-order" ng-model="prop.adapter.order"></div></div><!-- END Order --><div class="col-md-2" ng-if="prop.type === \'string\'"><div class="form-group"><label class="control-label empty-label">&nbsp;</label><div class="checkbox no-margin"><label><input type="checkbox" ng-model="view.isEnum" ng-change="toggleEnum()"> Enum</label></div></div></div><!-- END Enum --><div class="col-md-2" ng-if="prop.type === \'file\'"><div class="form-group"><label class="control-label empty-label">&nbsp;</label><div class="checkbox no-margin"><label><input type="checkbox" ng-model="prop.adapter.streamable"> Streamable</label></div></div></div><!-- END Streamable --></div><div class="row" ng-if="prop.type === \'array\'"><div class="col-md-2"><div class="form-group" title="Min"><label for="property-item-min-{{ view.uniqueId }}" class="control-label">Min</label><input type="number" class="form-control" id="property-item-min-{{ view.uniqueId }}" name="{{ name }}-item-min" ng-model="prop.minItems" min="0"></div></div><!-- END Min --><div class="col-md-2"><div class="form-group" title="Max"><label for="property-item-max-{{ view.uniqueId }}" class="control-label">Max</label><input type="number" class="form-control" id="property-item-max-{{ view.uniqueId }}" name="{{ name }}-item-max" ng-model="prop.maxItems" min="0"></div></div><!-- END Max --><div class="col-md-2"><div class="form-group" title="Item Type"><label for="property-item-type-{{ view.uniqueId }}" class="control-label">Item Type</label><select class="form-control" id="property-item-type-{{ view.uniqueId }}" name="{{ name }}-item-type" ng-model="prop.items.type"><option value="">-- choose --</option><option value="string">string</option><option value="number">number</option><option value="file">file</option><option value="object">object</option></select></div></div><!-- END Item Type --><div class="col-md-2"><div class="form-group" title="Item Separator"><label for="property-item-separator-{{ view.uniqueId }}" class="control-label">Item Separator</label><select class="form-control" id="property-item-separator-{{ view.uniqueId }}" name="{{ name }}-item-separator" ng-model="prop.adapter.listSeparator" ng-disabled="view.disabled"><option value="">-- choose --</option><option value=",">,</option><option value=";">;</option><option value="_">space</option><option value="repeat">repeat</option></select></div></div><!-- END Item Separator --><div class="col-md-2" ng-if="prop.items.type === \'file\'"><div class="form-group" title="Transform"><label for="property-item-transform-{{ view.uniqueId }}" class="control-label">Transform</label><select class="form-control" id="property-item-transform-{{ view.uniqueId }}" name="{{ name }}-item-transform" ng-model="prop.adapter.listTransform" ng-options="transform for transform in transforms"><option value="">-- none --</option></select></div></div><!-- END Transform --><div class="col-md-2" ng-if="prop.items.type === \'file\'"><div class="form-group"><label class="control-label empty-label">&nbsp;</label><div class="checkbox no-margin"><label><input type="checkbox" ng-model="prop.adapter.listStreamable"> Streamable</label></div></div></div><!-- END Item Streamable --></div><div class="row" ng-if="view.isEnum"><div class="col-md-12"><enum ng-model="prop.enum" type="string" min="1" is-required="true"></enum></div></div><div class="row" ng-if="prop.type === \'object\'"><div class="col-md-12"><legend class="legend-small toggle" ng-class="{active: view.propsExpanded}" ng-click="toggleProperties()">Properties<add-property type="input" properties="prop.properties" platform-features="platformFeatures" values-from="valuesFrom"></add-property></legend><property-input ng-repeat="(key, property) in prop.properties" ng-model="property" active="view.active[key]" name="{{ key }}" form="form" inputs="inputs[name]" properties="prop.properties" transforms="transforms"></property-input><p class="alert alert-info" ng-if="prop.properties | isEmpty">There are no properties at this moment.</p></div></div><div class="row" ng-if="prop.type === \'array\' && prop.items.type === \'object\'"><div class="col-md-12"><legend class="legend-small toggle" ng-class="{active: view.propsExpanded}" ng-click="toggleProperties()">Properties<add-property type="input" properties="prop.items.properties" platform-features="platformFeatures" values-from="valuesFrom"></add-property></legend><property-input ng-repeat="(key, property) in prop.items.properties" ng-model="property" active="view.active[key]" name="{{ key }}" form="form" inputs="inputs[name]" properties="prop.items.properties" transforms="transforms"></property-input><p class="alert alert-info" ng-if="prop.items.properties | isEmpty">There are no properties at this moment.</p></div></div></div></div>'),a.put("views/partials/property-output.html",'<div class="property-wrap" ng-class="{active: active}"><legend class="legend-tiny toggle" ng-class="{active: active}" ng-click="toggleProperty()"><div class="property-name" ng-hide="view.edit"><span>{{ name }}</span> <a href ng-click="toggleEdit($event)"><i class="glyphicon glyphicon-edit"></i></a></div><div class="property-name-form" ng-show="view.edit"><div class="input-group" ng-class="{\'has-error\': view.error}"><input type="text" class="form-control" name="name" ng-model="view.name" ng-click="stopPropagation($event)" ng-keypress="changeName($event)" placeholder="property name"> <span class="input-group-btn"><button class="btn btn-primary" ng-click="changeName($event)"><i class="glyphicon glyphicon-ok"></i></button> <button class="btn btn-default" ng-click="toggleEdit($event)"><i class="glyphicon glyphicon-remove"></i></button></span></div></div><div class="checkbox"><label><input type="checkbox" ng-model="prop.required"> required</label></div><span class="remove" ng-click="removeItem($event)">&times;</span></legend><div class="property-body"><div class="row"><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (form[name+\'-type\'].$invalid && form[name].$dirty)}"><label for="property-output-type-{{ view.uniqueId }}" class="control-label">Type</label><select class="form-control" id="property-output-type-{{ view.uniqueId }}" name="{{ name }}-type" ng-model="prop.type"><option value="file">file</option><option value="directory">directory</option><option value="array">array</option></select></div></div><!-- END Type --><div class="col-md-3"><div class="form-group"><label for="property-glob-{{ view.uniqueId }}" class="control-label">Glob</label><input type="text" class="form-control" id="property-glob-{{ view.uniqueId }}" name="{{ name }}-glob" ng-model="prop.adapter.glob"></div></div><!-- END Prefix --><div class="col-md-2" ng-if="prop.type === \'file\'"><div class="form-group"><label class="control-label empty-label">&nbsp;</label><div class="checkbox no-margin"><label><input type="checkbox" ng-model="prop.adapter.streamable"> Streamable</label></div></div></div><!-- END Streamable --></div><div class="row" ng-if="prop.type === \'array\'"><div class="col-md-3"><div class="form-group"><label for="property-item-min-{{ view.uniqueId }}" class="control-label">Min</label><input type="number" class="form-control" id="property-item-min-{{ view.uniqueId }}" name="{{ name }}-item-min" ng-model="prop.minItems" min="0"></div></div><!-- END Min --><div class="col-md-3"><div class="form-group"><label for="property-item-max-{{ view.uniqueId }}" class="control-label">Max</label><input type="number" class="form-control" id="property-item-max-{{ view.uniqueId }}" name="{{ name }}-item-max" ng-model="prop.maxItems" min="0"></div></div><!-- END Max --><div class="col-md-3"><div class="form-group"><label for="property-item-type-{{ view.uniqueId }}" class="control-label">Item Type</label><select class="form-control" id="property-item-type-{{ view.uniqueId }}" name="{{ name }}-item-type" ng-model="prop.items.type"><option value>-- choose --</option><option value="file">file</option><option value="directory">directory</option></select></div></div><!-- END Item Type --><div class="col-md-2" ng-if="prop.items.type === \'file\'"><div class="form-group"><label class="control-label empty-label">&nbsp;</label><div class="checkbox no-margin"><label><input type="checkbox" ng-model="prop.adapter.listStreamable"> Streamable</label></div></div></div><!-- END Item Streamable --></div></div></div>'),a.put("views/tabs/adapter.html",'<div class="form-group"><label class="control-label">Base Cmd</label><enum ng-model="view.toolForm.adapter.baseCmd" type="\'string\'" min="1" is-required="true"></enum></div><div class="form-group"><label for="stdout" class="control-label">Stdout</label><input type="text" class="form-control" id="stdout" name="stdout" ng-model="view.toolForm.adapter.stdout" required></div><legend class="legend-small toggle" ng-class="{active: view.propsExpanded.args}" ng-click="toggleProperties(\'args\')">Arguments<add-property type="arg" properties="view.toolForm.adapter.args" platform-features="view.toolForm.requirements.platformFeatures" values-from="view.valuesFrom"></add-property></legend><argument ng-repeat="(key, argument) in view.toolForm.adapter.args track by $index" ng-model="argument" active="view.active.args[key]" name="{{ key }}" form="forms.toolForm" properties="view.toolForm.adapter.args" values-from="view.valuesFrom"></argument><p class="alert alert-info" ng-if="view.toolForm.adapter.args | isEmpty">There are no arguments at this moment.</p>'),a.put("views/tabs/general.html",'<div class="form-group form-group-email" ng-class="{\'has-error\': (forms.toolForm.documentAuthor.$invalid && forms.toolForm.$dirty)}"><label for="documentAuthor" class="control-label">Document Author</label><input type="email" class="form-control" id="documentAuthor" name="documentAuthor" ng-model="view.toolForm.documentAuthor" required></div><legend class="legend-small">Environment</legend><div class="row"><div class="col-md-4"><div class="form-group" ng-class="{\'has-error\': (forms.toolForm.RECtype.$invalid && forms.toolForm.$dirty)}"><label for="type" class="control-label">Type</label><select class="form-control" id="type" name="RECtype" ng-model="view.toolForm.requirements.environment.container.type"><option value="docker">docker</option></select></div></div><div class="col-md-4"><div class="form-group" ng-class="{\'has-error\': (forms.toolForm.RECuri.$invalid && forms.toolForm.$dirty)}"><label for="uri" class="control-label">URI</label><input type="text" class="form-control" id="uri" name="RECuri" ng-model="view.toolForm.requirements.environment.container.uri" required></div></div><div class="col-md-4"><div class="form-group" ng-class="{\'has-error\': (forms.toolForm.RECimageId.$invalid && forms.toolForm.$dirty)}"><label for="uri" class="control-label">Image Id</label><input type="text" class="form-control" id="imageId" name="RECimageId" ng-model="view.toolForm.requirements.environment.container.imageId" required></div></div></div><!-- END Requirements -> Environment --><legend class="legend-small">Resources</legend><div class="row"><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (forms.toolForm.RRcpu.$invalid && forms.toolForm.$dirty)}"><label for="cpu" class="control-label">CPU</label><input type="number" class="form-control" id="cpu" name="RRcpu" ng-model="view.toolForm.requirements.resources.cpu" min="0" required></div></div><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (forms.toolForm.RRmem.$invalid && forms.toolForm.$dirty)}"><label for="mem" class="control-label">Memory</label><input type="number" class="form-control" id="mem" name="RRmem" ng-model="view.toolForm.requirements.resources.mem" min="0" required></div></div><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (forms.toolForm.RRdiskSpace.$invalid && forms.toolForm.$dirty)}"><label for="diskSpace" class="control-label">Disk Space</label><input type="number" class="form-control" id="diskSpace" name="RRdiskSpace" ng-model="view.toolForm.requirements.resources.diskSpace" min="0" required></div></div><div class="col-md-3"><div class="form-group"><label class="control-label empty-label">&nbsp;</label><div class="checkbox"><label><input type="checkbox" ng-model="view.toolForm.requirements.resources.network"> Network</label></div></div></div></div><div class="form-group" ng-class="{\'has-error\': (forms.toolForm.RplatformFeatures.$invalid && forms.toolForm.$dirty)}"><label class="control-label">Platform Features</label><div class="checkbox" ng-repeat="(key, val) in view.transforms"><label><input type="checkbox" ng-model="view.transforms[key]" ng-change="toggleTransformsList(key)"> {{ key }}</label></div></div><!-- END Requirements -> Resources -->'),a.put("views/tabs/inputs.html",'<legend class="legend-small toggle" ng-class="{active: view.propsExpanded.inputs}" ng-click="toggleProperties(\'inputs\')">Properties<add-property type="input" properties="view.toolForm.inputs.properties" platform-features="view.toolForm.requirements.platformFeatures" values-from="view.valuesFrom"></add-property></legend><property-input ng-repeat="(key, property) in view.toolForm.inputs.properties" ng-model="property" active="view.active.inputs[key]" name="{{ key }}" form="forms.toolForm" inputs="view.jobForm.inputs" properties="view.toolForm.inputs.properties" platform-features="view.toolForm.requirements.platformFeatures" values-from="view.valuesFrom" transforms="view.toolForm.requirements.platformFeatures"></property-input><p class="alert alert-info" ng-if="view.toolForm.inputs.properties | isEmpty">There are no inputs at this moment.</p>'),a.put("views/tabs/outputs.html",'<legend class="legend-small toggle" ng-class="{active: view.propsExpanded.outputs}" ng-click="toggleProperties(\'outputs\')">Properties<add-property type="output" properties="view.toolForm.outputs.properties" platform-features="view.toolForm.requirements.platformFeatures" values-from="view.valuesFrom"></add-property></legend><property-output ng-repeat="(key, property) in view.toolForm.outputs.properties" ng-model="property" active="view.active.outputs[key]" name="{{ key }}" form="forms.toolForm" properties="view.toolForm.outputs.properties" required-inputs="view.toolForm.outputs.required"></property-output><p class="alert alert-info" ng-if="view.toolForm.outputs.properties | isEmpty">There are no outputs at this moment.</p>'),a.put("views/tabs/values.html",'<ng-form class="form" name="forms.jobForm" role="form" novalidate><div class="input-container"><input-field ng-repeat="(key, property) in view.toolForm.inputs.properties" ng-model="view.jobForm.inputs[key]" key="{{ key }}" prop="property" form="forms.jobForm"></input-field></div><p class="alert alert-info" ng-if="view.toolForm.inputs.properties | isEmpty">There are no values to be set at this moment.</p></ng-form>')
}]),angular.module("clicheApp").controller("MasterCtrl",["$scope","$interval","Data",function(a,b,c){a.view={},a.view.classes=["page"],a.view.saving=!1,a.view.fetch=!1,a.$on("classChange",function(b,c){a.view.classes=c});var d=b(function(){a.view.saving=!0,console.log("saving..."),c.save().then(function(){a.view.saving=!1,console.log("saved.")},function(){a.view.saving=!1,console.log("save failed fo some reason...")})},5e3);a.$on("$destroy",function(){angular.isDefined(d)&&(b.cancel(d),d=void 0)}),c.checkStructure().then(function(){a.view.fetch=!0})}]),angular.module("clicheApp").controller("HomeCtrl",["$scope","$q","Data",function(a,b,c){a.$parent.view.classes.push("home","row"),a.view={},a.forms={},a.view.tab="general",a.view.trace="tool",a.view.showTrace=!0,a.view.tabViewPath="views/tabs/general.html",a.view.propsExpanded={inputs:!1,outputs:!1,args:!1},a.view.active={inputs:{},outputs:{},args:{}},a.view.valuesFrom={},a.view.toolForm=c.tool,a.view.jobForm=c.job,a.view.loading=!0,a.$watch("$parent.view.fetch",function(d){d&&b.all([c.fetchTool(),c.fetchJob()]).then(function(){a.view.toolForm=c.tool,a.view.jobForm=c.job,a.view.loading=!1,_.each(a.view.toolForm.inputs.properties,function(a){_.isUndefined(a.adapter.separator)&&(a.adapter.separator="_"),_.isUndefined(a.adapter.listSeparator)&&(a.adapter.listSeparator="repeat")}),_.each(a.view.toolForm.adapter.args,function(b){_.isUndefined(b.separator)&&(b.separator="_"),_.isUndefined(b.valueFrom)||(b.value=a.view.valuesFrom[b.valueFrom])}),a.view.transforms={"transforms/strip_ext":!1,"transforms/m-suffix":!1},_.each(a.view.toolForm.requirements.platformFeatures,function(b){a.view.transforms[b]=!0}),_.each(a.view.jobForm.allocatedResources,function(b,c){a.view.valuesFrom["#allocatedResources/"+c]=b,a.$watch("view.toolForm.requirements.resources."+c,function(b,d){b!==d&&(a.view.jobForm.allocatedResources[c]=b,a.view.valuesFrom["#allocatedResources/"+c]=b)})})})}),a.toggleTransformsList=function(b){_.contains(a.view.toolForm.requirements.platformFeatures,b)?_.remove(a.view.toolForm.requirements.platformFeatures,function(a){return b===a}):a.view.toolForm.requirements.platformFeatures.push(b)},a.toggleProperties=function(b){a.view.propsExpanded[b]=!a.view.propsExpanded[b];var c="args"!==b?a.view.toolForm[b].properties:a.view.toolForm.adapter.args;_.each(c,function(c,d){a.view.active[b][d]=a.view.propsExpanded[b]})},a.switchTab=function(b){a.view.tab=b,a.view.tabViewPath="views/tabs/"+b+".html"};var d=[],e=function(){a.view.command=c.generateCommand();var b=["view.jobForm.inputs","view.toolForm.inputs.properties","view.toolForm.adapter"];_.each(b,function(b){var e=a.$watch(b,function(b,d){b!==d&&(a.view.command=c.generateCommand())},!0);d.push(e)})},f=function(){_.each(d,function(a){_.isFunction(a)&&a.call()}),d=[]};a.switchTrace=function(b){a.view.trace=b,"console"===b?e():f()},a.toggleTrace=function(){a.view.showTrace=!a.view.showTrace,a.view.showTrace?"console"===a.view.trace&&e():"console"===a.view.trace&&f()}}]),angular.module("clicheApp").controller("AddPropertyCtrl",["$scope","$modalInstance","Data","options",function(a,b,c,d){switch(a.options=d,a.view={},d.type){case"input":a.view.property={type:"string",adapter:{separator:"_"}};break;case"output":a.view.property={type:"file"};break;case"arg":a.view.property={separator:"_"}}a.addProperty=function(){return a.view.error="",a.view.form.$setDirty(),a.view.form.$invalid?!1:void c.addProperty(d.type,a.view.name,a.view.property,d.properties).then(function(){b.close()},function(b){a.view.error=b})},a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")},a.changeValueFrom=function(){a.view.property.value=d.valuesFrom[a.view.property.valueFrom]},a.$watch("view.property.value",function(b,c){b===c||_.isEmpty(b)||delete a.view.property.valueFrom})}]),angular.module("clicheApp").controller("ModalCtrl",["$scope","$modalInstance","data",function(a,b,c){a.data=c,a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("clicheApp").directive("error",["$templateCache",function(a){return{restrict:"E",replace:!0,template:a.get("views/partials/error.html"),link:function(a){a.errorMessages=[],a.$on("httpError",function(b,c){-1===a.errorMessages.indexOf(c)&&a.errorMessages.push(c)}),a.closeError=function(){a.errorMessages=[]}}}}]),angular.module("clicheApp").directive("loading",["$timeout",function(a){return{scope:{ngClass:"=",loading:"="},link:function(b){var c,d=b.ngClass;d.push("loading"),d.push("loading-fade"),b.$watch("loading",function(e,f){e!==f&&(b.stopLoadingDelay(),_.remove(d,function(a){return"loading-fade"===a}),b.$emit("classChange",d),c=a(function(){_.remove(d,function(a){return"loading"===a}),b.$emit("classChange",d)},300))}),b.stopLoadingDelay=function(){angular.isDefined(c)&&(a.cancel(c),c=void 0)},b.$on("$destroy",function(){b.stopLoadingDelay()})}}}]),angular.module("clicheApp").directive("ioFile",["$templateCache",function(a){return{restrict:"E",replace:!0,template:a.get("views/partials/io-file.html"),scope:{file:"=ngModel",form:"=",name:"@"},link:function(a){console.log(a.file)}}}]),angular.module("clicheApp").directive("propertyInput",["$templateCache","$modal","Data","RecursionHelper",function(a,b,c,d){var e=0;return{restrict:"E",replace:!0,template:a.get("views/partials/property-input.html"),scope:{name:"@",prop:"=ngModel",active:"=",transforms:"=",properties:"=",inputs:"=",platformFeatures:"=",valuesFrom:"=",form:"="},compile:function(f){return d.compile(f,function(d){d.view={},e++,d.view.uniqueId=e,d.view.isEnum=_.isArray(d.prop.enum),d.view.propsExpanded=!1,d.view.active={},d.view.disabled=d.prop.items&&"object"===d.prop.items.type,d.view.edit=!1,d.toggleEdit=function(a){a.stopPropagation(),d.view.edit=!d.view.edit,d.view.edit&&(d.view.name=angular.copy(d.name))},d.toggleProperties=function(){d.view.propsExpanded=!d.view.propsExpanded,_.each(d.prop.items.properties,function(a,b){d.view.active[b]=d.view.propsExpanded})},d.toggleProperty=function(){d.active=!d.active},d.toggleEnum=function(){d.prop.enum=d.view.isEnum?[""]:null},d.removeItem=function(e){e.stopPropagation();var f=b.open({template:a.get("views/partials/confirm-delete.html"),controller:"ModalCtrl",windowClass:"modal-confirm",resolve:{data:function(){return{}}}});f.result.then(function(){c.deleteProperty("input",d.name,d.properties),d.inputs&&!_.isUndefined(d.inputs[d.name])&&delete d.inputs[d.name],_.isArray(d.inputs)&&_.each(d.inputs,function(a){_.isUndefined(a)||delete a[d.name]})})},d.changeName=function(a){return a.stopPropagation(),d.view.error=!1,_.isUndefined(a.keyCode)||13===a.keyCode||0===a.keyCode?!_.isUndefined(d.properties[d.view.name])||_.isEmpty(d.view.name)?(d.view.error=!0,!1):(d.properties[d.view.name]=angular.copy(d.properties[d.name]),d.inputs&&!_.isUndefined(d.inputs[d.name])&&(d.inputs[d.view.name]=angular.copy(d.inputs[d.name]),delete d.inputs[d.name]),_.isArray(d.inputs)&&_.each(d.inputs,function(a){_.isUndefined(a)||(a[d.view.name]=angular.copy(a[d.name]),delete a[d.name])}),delete d.properties[d.name],d.name=d.view.name,d.view.edit=!1,void 0):!1},d.stopPropagation=function(a){a.stopPropagation()};var f=c.getMap();d.$watch("prop.type",function(a,b){a!==b&&(_.each(d.prop,function(b,c){_.contains(_.keys(f[a].root),c)||"adapter"===c||(delete d.prop[c],"enum"===c&&(d.view.isEnum=!1)),_.each(f[a].root,function(a,b){_.isUndefined(d.prop[b])&&(d.prop[b]=a)})}),_.each(d.prop.adapter,function(b,c){_.contains(_.keys(f[a].adapter),c)||delete d.prop.adapter[c],_.each(f[a].adapter,function(a,b){_.isUndefined(d.prop.adapter[b])&&(d.prop.adapter[b]=a)})}))}),d.$watch("prop.items.type",function(a,b){a!==b&&("object"===a?(d.view.disabled=!0,_.isUndefined(d.prop.items.properties)&&(d.prop.items.properties={},d.prop.adapter.prefix="",d.prop.adapter.listSeparator=void 0,d.prop.adapter.separator="_",d.prop.adapter.transform=void 0)):(d.view.disabled=!1,_.isUndefined(d.prop.items)||delete d.prop.items.properties))})})}}}]),angular.module("clicheApp").directive("propertyOutput",["$templateCache","$modal","Data",function(a,b,c){var d=0;return{restrict:"E",replace:!0,template:a.get("views/partials/property-output.html"),scope:{name:"@",prop:"=ngModel",active:"=",requiredInputs:"=",properties:"=",form:"="},link:function(e){e.view={},d++,e.view.uniqueId=d,e.view.isEnum=_.isArray(e.prop.enum),e.view.edit=!1,e.toggleEdit=function(a){a.stopPropagation(),e.view.edit=!e.view.edit,e.view.edit&&(e.view.name=angular.copy(e.name))},e.toggleProperty=function(){e.active=!e.active},e.removeItem=function(d){d.stopPropagation();var f=b.open({template:a.get("views/partials/confirm-delete.html"),controller:"ModalCtrl",windowClass:"modal-confirm",resolve:{data:function(){return{}}}});f.result.then(function(){c.deleteProperty("output",e.name,e.properties)})},e.changeName=function(a){return a.stopPropagation(),e.view.error=!1,_.isUndefined(a.keyCode)||13===a.keyCode||0===a.keyCode?!_.isUndefined(e.properties[e.view.name])||_.isEmpty(e.view.name)?(e.view.error=!0,!1):(e.properties[e.view.name]=_.cloneDeep(e.properties[e.name],function(){delete e.properties[e.name]}),e.name=e.view.name,void(e.view.edit=!1)):!1},e.stopPropagation=function(a){a.stopPropagation()}}}}]),angular.module("clicheApp").directive("enum",["$templateCache",function(a){return{restrict:"E",replace:!0,template:a.get("views/partials/enum.html"),scope:{model:"=ngModel",type:"=",min:"=",max:"=",properties:"=",isRequired:"=",form:"="},link:function(a){a.view={},a.view.list=[],a.view.tplPath="views/enum/enum-"+a.type+".html",a.getSchema=function(){var b;return b="file"===a.type?{path:""}:"object"===a.type?{}:""},_.isArray(a.model)&&0!==a.model.length||isNaN(a.min)?_.each(a.model,function(b){a.view.list.push({value:b})}):_.times(a.min,function(){a.view.list.push({value:a.getSchema()})}),a.addItem=function(){return a.max&&a.view.list.length>=a.max?!1:void a.view.list.push({value:a.getSchema()})},a.removeItem=function(b){return a.min&&a.view.list.length<=a.min?!1:void a.view.list.splice(b,1)},a.$watch("view.list",function(b,c){b!==c&&(a.model=_.pluck(b,"value"))},!0)}}}]),angular.module("clicheApp").directive("inputField",["$templateCache","$compile","RecursionHelper",function(a,b,c){var d=0;return{restrict:"E",replace:!0,template:a.get("views/partials/input-field.html"),scope:{model:"=ngModel",prop:"=",key:"@",form:"="},compile:function(e){return c.compile(e,function(c,e){c.view={},d++,c.view.uniqueId=d;var f=c.model;if("file"===c.prop.type)f={path:c.model&&c.model.path?c.model.path:c.model};else if("object"===c.prop.type)f=_.isObject(c.model)?c.model:{};else if("array"===c.prop.type)switch(f=[],c.prop.items.type){case"object":_.each(c.model,function(a){var b=_.isObject(a)?a:{};delete b.path,f.push(b)});break;case"file":_.each(c.model,function(a){var b={path:a&&a.path?a.path:a};f.push(b)});break;default:f.push(_.isObject(c.model)?"":c.model)}else f=_.isObject(c.model)?"":c.model;c.view.input=f;var g=a.get("views/inputs/input-"+c.prop.type+".html");e.append(g),b(e.contents())(c),c.$watch("view.input",function(a,b){a!==b&&(c.model=a)},!0)})}}}]),angular.module("clicheApp").directive("argument",["$templateCache","$modal","Data",function(a,b,c){var d=0;return{restrict:"E",replace:!0,template:a.get("views/partials/argument.html"),scope:{name:"@",arg:"=ngModel",active:"=",form:"=",properties:"=",valuesFrom:"="},link:function(e){e.view={},d++,e.view.uniqueId=d,_.isUndefined(e.arg.valueFrom)||(e.arg.value=e.valuesFrom[e.arg.valueFrom]),e.toggleArgument=function(){e.active=!e.active},e.changeValueFrom=function(){e.arg.value=e.valuesFrom[e.arg.valueFrom]},e.$watch("arg.value",function(a,b){a===b||_.isEmpty(a)||(e.arg.valueFrom=null)}),e.removeItem=function(d){d.stopPropagation();var f=b.open({template:a.get("views/partials/confirm-delete.html"),controller:"ModalCtrl",windowClass:"modal-confirm",resolve:{data:function(){return{}}}});f.result.then(function(){c.deleteProperty("arg",e.name,e.properties)})}}}}]),angular.module("clicheApp").directive("addProperty",["$templateCache","$modal",function(a,b){return{restrict:"E",replace:!0,template:'<a href ng-click="addItem($event)" class="btn btn-default"><i class="glyphicon glyphicon-plus"></i></a>',scope:{type:"@",properties:"=",platformFeatures:"=",valuesFrom:"="},link:function(c){c.addItem=function(d){d.stopPropagation(),b.open({template:a.get("views/partials/add-property-"+c.type+".html"),controller:"AddPropertyCtrl",windowClass:"modal-prop",resolve:{options:function(){return{type:c.type,properties:c.properties,platformFeatures:c.platformFeatures,valuesFrom:c.valuesFrom}}}})}}}}]),angular.module("clicheApp").filter("isEmpty",[function(){return function(a){return _.isEmpty(a)}}]),angular.module("clicheApp").filter("trim",[function(){return function(a){return a.trim()}}]),angular.module("clicheApp").filter("contains",[function(){return function(a,b){return _.contains(a,b)}}]),angular.module("clicheApp").factory("HTTPInterceptor",["$q","$rootScope","$location",function(a,b,c){c.protocol()+"://"+c.host();return{request:function(b){return b||a.when(b)},requestError:function(c){return b.$broadcast("httpError","An error occurred while attempting to send request to "+c.config.url),a.reject(c)},response:function(b){return b||a.when(b)},responseError:function(c){var d=_.isEmpty(c.data.message)?"An error occurred while attempting to retrieve response from "+c.config.url:c.data.message;return b.$broadcast("httpError",d),a.reject(c)}}}]),angular.module("clicheApp").factory("Data",["$localForage","$http","$q",function(a,b,c){var d={};return d.tool={},d.job=null,d.fetchTool=function(){var e=c.defer();return a.getItem("tool").then(function(c){_.isNull(c)||_.isEmpty(c)?b({method:"GET",url:"data/tool.json"}).success(function(b){d.tool=b.tool,e.resolve(b.tool),a.setItem("tool",b.tool)}).error(function(){e.reject("JSON file could not be fetched")}):(d.tool=c,e.resolve(c))}),e.promise},d.fetchJob=function(){var e=c.defer();return a.getItem("job").then(function(c){_.isNull(c)||_.isEmpty(c)?b({method:"GET",url:"data/job.json"}).success(function(b){d.job=b.job,e.resolve(b.job),a.setItem("job",b.job)}).error(function(){e.reject("JSON file could not be fetched")}):(d.job=c,e.resolve(c))}),e.promise},d.getMap=function(){var a={file:{root:{type:"string",required:!1},adapter:{prefix:"",separator:"_",order:0,transform:void 0,streamable:!1}},string:{root:{type:"string",required:!1,"enum":null},adapter:{prefix:"",separator:"_",order:0,transform:void 0}},integer:{root:{type:"string",required:!1},adapter:{prefix:"",separator:"_",order:0,transform:void 0}},array:{root:{type:"string",required:!1,minItems:void 0,maxItems:void 0,items:{type:"string"}},adapter:{prefix:"",separator:"_",order:0,transform:void 0,listSeparator:","}},"boolean":{root:{type:"string",required:!1},adapter:{prefix:"",separator:"_",order:0,transform:void 0}},object:{root:{type:"string",required:!1,properties:{}},adapter:{prefix:"",separator:"_",order:0,transform:void 0}}};return a},d.save=function(){var b=c.defer();return c.all([a.setItem("tool",d.tool),a.setItem("job",d.job)]).then(function(){b.resolve()},function(){b.reject()}),b.promise},d.addProperty=function(a,b,d,e){var f=c.defer();return"arg"===a?(e.push(d),f.resolve()):_.isUndefined(e[b])?(e[b]=d,f.resolve()):f.reject("Choose another key, the one already exists"),f.promise},d.deleteProperty=function(a,b,c){"arg"===a?c.splice(b,1):delete c[b]},d.applyTransform=function(a,b){var c;switch(a){case"transforms/strip_ext":var d=b?b.split("."):[];d[0]&&(c=d[0]);break;case"transforms/m-suffix":c=b+"m";break;default:c=b}return c},d.parseSeparator=function(a,b){var c="";return c=_.isUndefined(b)||"_"===b?""===a?"":" ":""===a?"":b},d.parsePrefix=function(a){var b="";return b=_.isUndefined(a)?"":a},d.parseListSeparator=function(a){var b="";return b=_.isUndefined(a)||"_"===a?" ":a},d.parseArrayInput=function(a,b,c,e,f){var g=" ",h=[];return"object"!==a.items.type&&(g="repeat"===f?" "+c+e:f),_.each(b,function(b){var c="";c="object"===a.items.type?d.parseObjectInput(a.items.properties,b):d.applyTransform(a.adapter.listTransform,_.isObject(b)?b.path:b),h.push(c)}),h.join(g)},d.prepareProperties=function(a,b){var c=[];return _.each(a,function(a,e){if(!_.isUndefined(b[e])){var f,g=d.parsePrefix(a.adapter.prefix),h=d.parseSeparator(g,a.adapter.separator),i=d.parseListSeparator(a.adapter.listSeparator);f="array"===a.type?d.parseArrayInput(a,b[e],g,h,i):"file"===a.type?d.applyTransform(a.adapter.transform,b[e].path):"object"===a.type?d.parseObjectInput(a.properties,b[e]):d.applyTransform(a.adapter.transform,b[e]),c.push(_.merge({key:e,order:a.adapter.order,value:f,prefix:g,separator:h},a))}}),c},d.parseObjectInput=function(a,b){var c=[],e=d.prepareProperties(a,b);e=_.sortBy(e,"order"),_.each(e,function(a){c.push(a.prefix+a.separator+a.value)});var f=c.join(" ");return f},d.generateCommand=function(){var a=[],b=[],c=d.prepareProperties(d.tool.inputs.properties,d.job.inputs);_.each(d.tool.adapter.args,function(b,c){var e=d.parsePrefix(b.prefix);a.push(_.merge({key:"arg"+c,order:b.order,prefix:e},b))});var e=_.sortBy(c.concat(a),"order");_.each(e,function(a){var c=d.parseSeparator(a.prefix,a.separator),e=_.isUndefined(a.value)?"":a.value;b.push(a.prefix+c+e)});var f=d.tool.adapter.baseCmd.join(" ")+" "+b.join(" ")+" > "+d.tool.adapter.stdout;return f},d.checkStructure=function(){var b=c.defer();return a.getItem("version").then(function(d){return 2===d?(b.resolve(),!1):void c.all([a.setItem("version",2),a.setItem("tool",{}),a.setItem("job",{})]).then(function(){b.resolve()})}),b.promise},d}]),angular.module("clicheApp").factory("RecursionHelper",["$compile",function(a){return{compile:function(b,c){angular.isFunction(c)&&(c={post:c});var d,e=b.contents().remove();return{pre:c&&c.pre?c.pre:null,post:function(b,f){d||(d=a(e)),d(b,function(a){f.append(a)}),c&&c.post&&c.post.apply(null,arguments)}}}}}]);
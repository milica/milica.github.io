"use strict";angular.module("clicheApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ui.bootstrap","ngPrettyJson"]).config(["$routeProvider","$httpProvider",function(a,b){a.when("/",{templateUrl:"views/home.html",controller:"HomeCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/restart",{templateUrl:"views/restart.html",controller:"RestartCtrl"}).otherwise({redirectTo:"/"}),b.interceptors.push("HTTPInterceptor")}]),angular.module("clicheApp").run(["$templateCache",function(a){a.put("views/home.html",'<div class="page home"><div class="container-fluid"><div class="row"><div class="col" ng-class="{\'col-md-7\': view.showTrace, \'col-md-12\': !view.showTrace}"><div class="heading row"><div ng-class="{\'col-md-12\': view.showTrace, \'col-md-8 col-md-offset-2\': !view.showTrace}"><ul class="nav nav-tabs nav-tabs-steps"><li class="logo"><a ng-href="#/"><span>cli</span>che</a></li><li ng-class="{active: view.tab === \'general\'}"><a href ng-click="switchTab(\'general\')">General</a></li><li ng-class="{active: view.tab === \'inputs\'}"><a href ng-click="switchTab(\'inputs\')">Inputs</a></li><li ng-class="{active: view.tab === \'outputs\'}"><a href ng-click="switchTab(\'outputs\')">Outputs</a></li><li ng-class="{active: view.tab === \'adapter\'}"><a href ng-click="switchTab(\'adapter\')">Adapter</a></li><li ng-class="{active: view.tab === \'values\'}"><a href ng-click="switchTab(\'values\')">Values</a></li><li class="pull-right"><a href ng-click="toggleTrace()" class="toggle-trace" tooltip="{{ view.showTrace ? \'hide\' : \'show\' }} trace" tooltip-append-to-body="true"><i class="glyphicon" ng-class="{\'glyphicon-pause\': view.showTrace, \'glyphicon-play\': !view.showTrace}"></i></a></li></ul></div></div><!-- # .heading --><div class="no-margin row"><div ng-class="{\'col-md-12\': view.showTrace, \'col-md-8 col-md-offset-2\': !view.showTrace}"><ng-form class="form" name="forms.toolForm" role="form" novalidate><div class="tabs left"><ng-include src="view.tabViewPath"></ng-include></div></ng-form></div></div></div><div class="col col-md-5" ng-show="view.showTrace"><div class="heading"><ul class="nav nav-tabs nav-tabs-trace"><li class="pull-right" ng-class="{active: view.trace === \'console\'}"><a href ng-click="switchTrace(\'console\')">Console</a></li><li class="pull-right" ng-class="{active: view.trace === \'job\'}"><a href ng-click="switchTrace(\'job\')">Job JSON</a></li><li class="pull-right" ng-class="{active: view.trace === \'tool\'}"><a href ng-click="switchTrace(\'tool\')">Tool JSON</a></li></ul></div><div class="tabs right" ng-switch="view.trace"><div class="tab" ng-switch-when="tool"><pre class="json-trace" pretty-json="view.toolForm"></pre></div><div class="tab" ng-switch-when="job"><pre class="json-trace" pretty-json="view.jobForm"></pre></div><div class="tab" ng-switch-when="console"><pre class="console-trace">{{ view.command }}</pre></div></div></div></div></div><!-- # .container-fluid --></div>'),a.put("views/inputs/input-array.html",'<div class="form-group" ng-class="{required: prop.required, \'has-error\': ((input.length < prop.minItems && prop.minItems > 0) || (input.length > prop.maxItems && prop.maxItems > 0))}"><label class="control-label">{{ key }} <span ng-if="prop.minItems || prop.maxItems">(<strong ng-if="prop.minItems">min: {{ prop.minItems }}</strong> <strong ng-if="prop.maxItems">max: {{ prop.maxItems }}</strong>)</span></label><enum ng-model="input" type="prop.items.type" min="prop.minItems" max="prop.maxItems" is-required="prop.required"></enum></div>'),a.put("views/inputs/input-boolean.html",'<div class="form-group" ng-class="{required: prop.required, \'has-error\': inputForm[\'input-\' + prop.type].$invalid && form.$dirty}"><div class="checkbox"><label><input type="checkbox" name="input-boolean" ng-model="input"> {{ key }}</label></div></div>'),a.put("views/inputs/input-file.html",'<div class="form-group" ng-class="{required: prop.required, \'has-error\': inputForm[\'input-\' + prop.type].$invalid && form.$dirty}"><label class="control-label">{{ key }}</label><input type="text" class="form-control" name="input-file" ng-model="input.path" ng-required="prop.required"></div>'),a.put("views/inputs/input-integer.html",'<div class="form-group" ng-class="{required: prop.required, \'has-error\': inputForm[\'input-\' + prop.type].$invalid && form.$dirty}"><label class="control-label">{{ key }}</label><input type="number" class="form-control" name="input-integer" ng-model="input" ng-required="prop.required"></div>'),a.put("views/inputs/input-string.html",'<div class="form-group" ng-class="{required: prop.required, \'has-error\': inputForm[\'input-\' + prop.type].$invalid && form.$dirty}"><label class="control-label">{{ key }}</label><input ng-show="!prop.enum" type="text" class="form-control" name="input-string" ng-model="input" ng-required="prop.required"><select ng-show="prop.enum" class="form-control" name="input-string" ng-model="input" ng-required="prop.required"><option value>-- choose --</option><option ng-repeat="option in prop.enum track by $index" value="option">{{ (option === \'\') ? \'empty value\' : option }}</option></select></div>'),a.put("views/login.html",'<div ng-class="$parent.view.classes" loading="view.loading"><div class="heading"><div class="container"><h1 class="main-title">Login</h1></div></div><!-- # .heading --><div class="container"><div class="row"><div class="col-md-offset-4 col-md-4"><p ng-if="view.error" class="alert alert-danger">{{ view.error }}</p><form ng-submit="logIn()" name="form" role="form" novalidate><div class="form-group" ng-class="{\'has-error\': (form.email.$invalid && form.$dirty)}"><label for="email" class="control-label">Email</label><input type="email" class="form-control" id="email" name="email" ng-model="view.user.email" placeholder="Email" required><p class="help-block" ng-if="(form.email.$invalid && form.$dirty)">You must enter correct email address</p></div><div class="form-group" ng-class="{\'has-error\': (form.password.$invalid && form.$dirty)}"><label for="password" class="control-label">Password</label><input type="password" class="form-control" id="password" name="password" ng-model="view.user.password" placeholder="Password" required><p class="help-block" ng-if="(form.password.$invalid && form.$dirty)">You must enter correct password</p></div><div class="form-group"><button type="submit" class="btn btn-primary btn-block">Sign in</button></div></form></div></div></div><!-- # .container --></div>'),a.put("views/partials/add-property-arg.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()"><span>&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title">Add Argument</h4></div><div class="modal-body"><form ng-submit="addProperty()" name="view.form" novalidate><div class="row"><div class="col-md-4"><div class="form-group"><label for="value-from" class="control-label">Value From</label><select class="form-control" id="value-from" name="valueFrom" ng-change="changeValueFrom()" ng-model="view.property.valueFrom" ng-options="key as key for (key, value) in options.valuesFrom"><option value>-- none --</option></select></div></div><div class="col-md-3"><div class="form-group"><label class="control-label" for="prefix">Prefix</label><input type="text" class="form-control" id="prefix" name="prefix" ng-model="view.property.prefix"></div></div><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (view.form.separator.$invalid && view.form.$dirty)}"><label class="control-label" for="separator">Separator</label><select class="form-control" id="separator" name="separator" ng-model="view.property.separator" required><option value="">empty string</option><option value="_">space</option><option value="=">=</option></select></div></div></div><div class="row"><div class="col-md-4"><div class="form-group" ng-class="{\'has-error\': (view.form.value.$invalid && view.form.$dirty)}"><label for="value" class="control-label">Value</label><input type="text" class="form-control" id="value" name="value" ng-model="view.property.value" required></div></div><div class="col-md-2"><div class="form-group" ng-class="{\'has-error\': (view.form.order.$invalid && view.form.$dirty)}"><label for="order" class="control-label">Order</label><input type="number" class="form-control" id="order" name="order" ng-model="view.property.order"></div></div></div><div class="form-group main-actions"><a href class="btn btn-warning" ng-click="cancel()">Cancel</a> <button type="submit" class="btn btn-primary">Save</button></div></form></div>'),a.put("views/partials/add-property-input.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()"><span>&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title">Add Input Property</h4></div><div class="modal-body"><form ng-submit="addProperty()" name="view.form" novalidate><div class="row"><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (view.form.name.$invalid && view.form.$dirty)}"><label class="control-label" for="name">Name</label><input type="text" class="form-control" id="name" name="name" ng-model="view.name" required></div></div><!-- END Name --><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (view.form.type.$invalid && view.form.$dirty)}"><label class="control-label" for="type">Type</label><select class="form-control" id="type" name="type" ng-model="view.property.type" required><option value="file">file</option><option value="string">string</option><option value="integer">integer</option><option value="array">array</option><option value="boolean">boolean</option></select></div></div><!-- END Type --><div class="col-md-3"><div class="form-group"><label class="control-label" for="prefix">Prefix</label><input type="text" class="form-control" id="prefix" name="prefix" ng-model="view.property.adapter.prefix"></div></div><!-- END Prefix --><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (view.form.separator.$invalid && view.form.$dirty)}"><label class="control-label" for="separator">Separator</label><select class="form-control" id="separator" name="separator" ng-model="view.property.adapter.separator" required><option value="">empty string</option><option value="_">space</option><option value="=">=</option></select></div></div><!-- END Separator --></div><div class="row"><div class="col-md-4"><div class="form-group"><label class="control-label" for="transform">Transform</label><select class="form-control" id="transform" name="transform" ng-model="view.property.adapter.transform" ng-options="transform for transform in options.platformFeatures"><option value="">-- none --</option></select></div></div><!-- END Transform --><div class="col-md-4"><div class="form-group" ng-class="{\'has-error\': (view.form.order.$invalid && view.form.$dirty)}"><label class="control-label" for="order">Order</label><input type="number" class="form-control" id="order" name="order" ng-model="view.property.adapter.order"></div></div><!-- END Order --><div class="col-md-4"><div class="form-group" ng-if="view.property.type === \'string\'"><label>&nbsp;</label><div class="checkbox"><label><input type="checkbox" ng-model="view.isEnum" ng-change="toggleEnum()"> Enum</label></div></div></div><!-- END Eum --><div class="col-md-4" ng-if="view.property.type === \'file\'"><div class="form-group"><label>&nbsp;</label><div class="checkbox"><label><input type="checkbox" ng-model="view.property.adapter.streamable"> Streamable</label></div></div></div><!-- END Streamable --></div><div class="row" ng-if="view.property.type === \'array\'"><div class="col-md-2"><div class="form-group" ng-class="{\'has-error\': (view.form.min.$invalid && view.form.$dirty)}"><label class="control-label" for="min" class="control-label">Min</label><input type="number" class="form-control" id="min" name="min" ng-model="view.property.minItems" min="0"></div></div><!-- END Min --><div class="col-md-2"><div class="form-group" ng-class="{\'has-error\': (view.form.max.$invalid && view.form.$dirty)}"><label class="control-label" for="max" class="control-label">Max</label><input type="number" class="form-control" id="max" name="max" ng-model="view.property.maxItems" min="0"></div></div><!-- END Max --><div class="col-md-4"><div class="form-group"><label class="control-label" for="item-type" class="control-label">Item Type</label><select class="form-control" id="item-type" name="itemType" ng-model="view.property.items.type"><option value="">-- choose --</option><option value="string">string</option><option value="number">number</option><option value="file">file</option></select></div></div><!-- END Item Type --><div class="col-md-4"><div class="form-group"><label class="control-label" for="item-separator" class="control-label">Item Separator</label><select class="form-control" id="item-separator" name="itemSeparator" ng-model="view.property.adapter.listSeparator"><option value="">-- choose --</option><option value=",">,</option><option value=";">;</option><option value="_">space</option><option value="repeat">repeat</option></select></div></div><!-- END Item Separator --></div><div class="row" ng-if="view.property.type === \'array\' && view.property.items.type === \'file\'"><div class="col-md-4"><div class="form-group"><label class="control-label" for="item-transform" class="control-label">Item Transform</label><select class="form-control" id="item-transform" name="item-transform" ng-model="view.property.adapter.listTransform" ng-options="transform for transform in options.platformFeatures"><option value="">-- none --</option></select></div></div><!-- END Transform --><div class="col-md-3"><div class="form-group"><label>&nbsp;</label><div class="checkbox"><label><input type="checkbox" ng-model="view.property.adapter.streamable"> Item Streamable</label></div></div></div><!-- END Item Streamable --></div><div class="row" ng-if="view.isEnum"><div class="col-md-12"><enum ng-model="view.property.enum" type="string" min="1" is-required="true"></enum></div></div><div class="form-group main-actions"><a href class="btn btn-warning" ng-click="cancel()">Cancel</a> <button type="submit" class="btn btn-primary">Save</button></div></form></div>'),a.put("views/partials/add-property-output.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()"><span>&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title">Add Output Property</h4></div><div class="modal-body"><form ng-submit="addProperty()" name="view.form" novalidate><div class="row"><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (view.form.name.$invalid && view.form.$dirty)}"><label class="control-label" for="name">Name</label><input type="text" class="form-control" id="name" name="name" ng-model="view.name" required></div></div><!-- END Name --><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (view.form.type.$invalid && view.form.$dirty)}"><label class="control-label" for="type">Type</label><select class="form-control" id="type" name="type" ng-model="view.property.type" required><option value="file">file</option><option value="directory">directory</option><option value="array">array</option></select></div></div><div class="col-md-3"><div class="form-group"><label class="control-label" for="glob">Glob</label><input type="text" class="form-control" id="glob" name="glob" ng-model="view.property.glob"></div></div><div class="col-md-3" ng-if="view.property.type === \'file\'"><div class="form-group"><label class="control-label">&nbsp;</label><div class="checkbox"><label><input type="checkbox" ng-model="view.property.adapter.streamable"> Streamable</label></div></div></div></div><div class="row" ng-if="view.property.type === \'array\'"><div class="col-md-3"><div class="form-group"><label for="item-min" class="control-label">Min</label><input type="number" class="form-control" id="item-min" name="itemMin" ng-model="view.property.minItems" min="0"></div></div><!-- END Min --><div class="col-md-3"><div class="form-group"><label for="item-max" class="control-label">Max</label><input type="number" class="form-control" id="item-max" name="itemMax" ng-model="view.property.maxItems" min="0"></div></div><!-- END Max --><div class="col-md-3"><div class="form-group"><label for="item-type" class="control-label">Item Type</label><select class="form-control" id="item-type" name="itemType" ng-model="view.property.items.type"><option value>-- choose --</option><option value="file">file</option><option value="directory">directory</option></select></div></div><!-- END Item Type --><div class="col-md-2" ng-if="view.property.items.type === \'file\'"><div class="form-group"><label class="control-label">&nbsp;</label><div class="checkbox no-margin"><label><input type="checkbox" ng-model="view.property.adapter.listStreamable"> Streamable</label></div></div></div><!-- END Item Streamable --></div><div class="form-group main-actions"><a href class="btn btn-warning" ng-click="cancel()">Cancel</a> <button type="submit" class="btn btn-primary">Save</button></div></form></div>'),a.put("views/partials/argument.html",'<div class="argument-wrap" ng-class="{active: active}"><legend class="legend-tiny toggle" ng-class="{active: active}" ng-click="toggleArgument()">arg{{ name }} <span class="remove" ng-click="removeItem($event)">&times;</span></legend><div class="property-body"><div class="row"><div class="col-md-4"><div class="form-group"><label for="argument-valuefrom-{{ view.uniqueId }}" class="control-label">Value From</label><select class="form-control" id="argument-valuefrom-{{ view.uniqueId }}" name="{{ name }}-valuefrom" ng-change="changeValueFrom()" ng-model="arg.valueFrom" ng-options="key as key for (key, value) in valuesFrom"><option value>-- none --</option></select></div></div><!-- END Value From --><div class="col-md-2"><div class="form-group"><label for="argument-prefix-{{ view.uniqueId }}" class="control-label">Prefix</label><input type="text" class="form-control" id="argument-prefix-{{ view.uniqueId }}" name="{{ name }}-prefix" ng-model="arg.prefix"></div></div><!-- END Prefix --><div class="col-md-2"><div class="form-group"><label for="argument-separator-{{ view.uniqueId }}" class="control-label">Separator</label><select class="form-control" id="argument-separator-{{ view.uniqueId }}" name="{{ name }}-separator" ng-model="arg.separator"><option value="">empty string</option><option value="_">space</option><option value="=">=</option></select></div></div><!-- END Separator --><div class="col-md-2"><div class="form-group"><label for="argument-value-{{ view.uniqueId }}" class="control-label">Value</label><input type="text" class="form-control" id="argument-value-{{ view.uniqueId }}" name="{{ name }}-value" ng-model="arg.value"></div></div><!-- END Value --><div class="col-md-2"><div class="form-group"><label for="argument-order-{{ view.uniqueId }}" class="control-label">Order</label><input type="number" class="form-control" id="argument-order-{{ view.uniqueId }}" name="{{ name }}-order" ng-model="arg.order"></div></div><!-- END Order --></div></div></div>'),a.put("views/partials/confirm-delete.html",'<div class="modal-body"><h4 class="center-block">Are you sure you want to delete this item?</h4><div class="center-block"><button class="btn btn-default" ng-click="cancel()">No</button> <button class="btn btn-danger" ng-click="ok()">Yes</button></div></div>'),a.put("views/partials/enum.html",'<div class="enum-list-wrap"><a href ng-click="addItem()" class="btn btn-default add-enum-item" ng-class="{disabled: max && list.length >= max}"><i class="glyphicon glyphicon-plus"></i></a><div class="enum-list-container"><ul class="enum-list" ng-class="{wide: min && list.length <= min}"><li ng-repeat="item in list track by $index"><div class="form-group" ng-class="{\'has-error\': isRequired && item.value === \'\'}"><input type="{{ (type === \'file\') ? \'string\' : type }}" class="form-control" ng-model="item.value" placeholder="Enter Value" ng-required="isRequired"></div><a href ng-hide="min && list.length <= min" class="glyphicon glyphicon-remove remove-btn" ng-click="removeItem($index)"></a></li></ul><p ng-if="list.length === 0" class="alert alert-info">Click + on the left to add some elements</p></div></div>'),a.put("views/partials/error.html",'<div class="general-error alert alert-danger" ng-class="{show: errorMessages.length > 0}"><button type="button" class="close" ng-click="closeError()"><span>&times;</span><span class="sr-only">Close</span></button><p ng-repeat="message in errorMessages">{{ message }}</p></div>'),a.put("views/partials/header.html",'<div class="header"><div ng-if="!view.loading" class="container-fluid"><div class="row"><div class="col-md-2"><a ng-href="#/" class="logo">Cliche</a></div><div class="col-md-10"><!--\n                <a ng-if="(view.user | isEmpty)" href="#/login" class="btn btn-primary pull-right">Log In</a>\n\n                <div ng-if="!(view.user | isEmpty)" class="actions pull-right">\n                    <span class="welcome">Welcome <strong>{{ view.user.name }}</strong></span>\n                    <a href ng-click="logOut()" tooltip="Log out" tooltip-placement="bottom" tooltip-append-to-body="true" class="glyphicon glyphicon-log-out log-out-btn"></a>\n                </div>\n                --></div></div></div></div>'),a.put("views/partials/input-field.html",'<ng-form name="inputForm" class="input-property"></ng-form>'),a.put("views/partials/io-file.html",'<div class="row"><div class="col-md-4"><input type="text" class="form-control" name="{{ name }}-path" ng-model="file.path" placeholder="Path" required></div><div class="col-md-4"><input type="text" class="form-control" name="{{ name }}-size" ng-model="file.size" placeholder="Size" required></div><div class="col-md-4"><input type="text" class="form-control" name="{{ name }}-checksum" ng-model="file.checksum" placeholder="Checksum" required></div></div>'),a.put("views/partials/options.html",'<div class="modal-header"><button type="button" class="close" ng-click="cancel()"><span>&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title">Options</h4></div><div class="modal-body"><div class="row"><div class="col-md-6"><p>You can (re)generate your token</p><button class="btn btn-primary" ng-click="generateToken()" ng-disabled="view.generating">(Re)generate Token</button></div><div class="col-md-6"><p>You can revoke your token</p><button class="btn btn-primary" ng-click="revokeToken()" ng-disabled="view.revoking">Revoke Token</button></div></div><p ng-if="view.trace !== \'\'" class="alert alert-success">{{ view.trace }}</p></div><div class="modal-footer"><button class="btn btn-warning" ng-click="cancel()">Close</button></div>'),a.put("views/partials/property-input.html",'<div class="property-wrap" ng-class="{active: active}"><legend class="legend-tiny toggle" ng-class="{active: active}" ng-click="toggleProperty()">{{ name }}<div class="checkbox"><label><input type="checkbox" ng-model="prop.required"> required</label></div><span class="remove" ng-click="removeItem($event)">&times;</span></legend><div class="property-body"><div class="row"><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (form[name+\'-type\'].$invalid && form[name].$dirty)}"><label for="property-input-type-{{ view.uniqueId }}" class="control-label">Type</label><select class="form-control" id="property-input-type-{{ view.uniqueId }}" name="{{ name }}-type" ng-model="prop.type"><option value="file">file</option><option value="string">string</option><option value="integer">integer</option><option value="array">array</option><option value="boolean">boolean</option></select></div></div><!-- END Type --><div class="col-md-1"><div class="form-group"><label for="property-prefix-{{ view.uniqueId }}" class="control-label">Prefix</label><input type="text" class="form-control" id="property-prefix-{{ view.uniqueId }}" name="{{ name }}-prefix" ng-model="prop.adapter.prefix"></div></div><!-- END Prefix --><div class="col-md-2"><div class="form-group"><label for="property-separator-{{ view.uniqueId }}" class="control-label">Separator</label><select class="form-control" id="property-separator-{{ view.uniqueId }}" name="{{ name }}-separator" ng-model="prop.adapter.separator"><option value="">empty string</option><option value="_">space</option><option value="=">=</option></select></div></div><!-- END Separator --><div class="col-md-2"><div class="form-group"><label for="property-transform-{{ view.uniqueId }}" class="control-label">Transform</label><select class="form-control" id="property-transform-{{ view.uniqueId }}" name="{{ name }}-transform" ng-model="prop.adapter.transform" ng-options="transform for transform in transforms"><option value="">-- none --</option></select></div></div><!-- END Transform --><div class="col-md-2"><div class="form-group"><label for="property-order-{{ view.uniqueId }}" class="control-label">Order</label><input type="number" class="form-control" id="property-order-{{ view.uniqueId }}" name="{{ name }}-order" ng-model="prop.adapter.order"></div></div><!-- END Order --><div class="col-md-2" ng-if="prop.type === \'string\'"><div class="form-group"><label class="control-label">&nbsp;</label><div class="checkbox no-margin"><label><input type="checkbox" ng-model="view.isEnum" ng-change="toggleEnum()"> Enum</label></div></div></div><!-- END Enum --><div class="col-md-2" ng-if="prop.type === \'file\'"><div class="form-group"><label class="control-label">&nbsp;</label><div class="checkbox no-margin"><label><input type="checkbox" ng-model="prop.adapter.streamable"> Streamable</label></div></div></div><!-- END Streamable --></div><div class="row" ng-if="prop.type === \'array\'"><div class="col-md-2"><div class="form-group"><label for="property-item-min-{{ view.uniqueId }}" class="control-label">Min</label><input type="number" class="form-control" id="property-item-min-{{ view.uniqueId }}" name="{{ name }}-item-min" ng-model="prop.minItems" min="0"></div></div><!-- END Min --><div class="col-md-2"><div class="form-group"><label for="property-item-max-{{ view.uniqueId }}" class="control-label">Max</label><input type="number" class="form-control" id="property-item-max-{{ view.uniqueId }}" name="{{ name }}-item-max" ng-model="prop.maxItems" min="0"></div></div><!-- END Max --><div class="col-md-2"><div class="form-group"><label for="property-item-type-{{ view.uniqueId }}" class="control-label">Item Type</label><select class="form-control" id="property-item-type-{{ view.uniqueId }}" name="{{ name }}-item-type" ng-model="prop.items.type"><option value="">-- choose --</option><option value="string">string</option><option value="number">number</option><option value="file">file</option></select></div></div><!-- END Item Type --><div class="col-md-2"><div class="form-group"><label for="property-item-separator-{{ view.uniqueId }}" class="control-label">Item Separator</label><select class="form-control" id="property-item-separator-{{ view.uniqueId }}" name="{{ name }}-item-separator" ng-model="prop.adapter.listSeparator"><option value="">-- choose --</option><option value=",">,</option><option value=";">;</option><option value=" ">space</option><option value="repeat">repeat</option></select></div></div><!-- END Item Separator --><div class="col-md-2" ng-if="prop.items.type === \'file\'"><div class="form-group"><label for="property-item-transform-{{ view.uniqueId }}" class="control-label">Transform</label><select class="form-control" id="property-item-transform-{{ view.uniqueId }}" name="{{ name }}-item-transform" ng-model="prop.adapter.listTransform" ng-options="transform for transform in transforms"><option value="">-- none --</option></select></div></div><!-- END Transform --><div class="col-md-2" ng-if="prop.items.type === \'file\'"><div class="form-group"><label class="control-label">&nbsp;</label><div class="checkbox no-margin"><label><input type="checkbox" ng-model="prop.adapter.listStreamable"> Streamable</label></div></div></div><!-- END Item Streamable --></div><div class="row" ng-if="view.isEnum"><div class="col-md-12"><enum ng-model="prop.enum" type="string" min="1" is-required="true"></enum></div></div></div></div>'),a.put("views/partials/property-output.html",'<div class="property-wrap" ng-class="{active: active}"><legend class="legend-tiny toggle" ng-class="{active: active}" ng-click="toggleProperty()">{{ name }}<div class="checkbox"><label><input type="checkbox" ng-model="prop.required"> required</label></div><span class="remove" ng-click="removeItem($event)">&times;</span></legend><div class="property-body"><div class="row"><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (form[name+\'-type\'].$invalid && form[name].$dirty)}"><label for="property-output-type-{{ view.uniqueId }}" class="control-label">Type</label><select class="form-control" id="property-output-type-{{ view.uniqueId }}" name="{{ name }}-type" ng-model="prop.type"><option value="file">file</option><option value="directory">directory</option><option value="array">array</option></select></div></div><!-- END Type --><div class="col-md-3"><div class="form-group"><label for="property-glob-{{ view.uniqueId }}" class="control-label">Glob</label><input type="text" class="form-control" id="property-glob-{{ view.uniqueId }}" name="{{ name }}-glob" ng-model="prop.adapter.glob"></div></div><!-- END Prefix --><div class="col-md-2" ng-if="prop.type === \'file\'"><div class="form-group"><label class="control-label">&nbsp;</label><div class="checkbox no-margin"><label><input type="checkbox" ng-model="prop.adapter.streamable"> Streamable</label></div></div></div><!-- END Streamable --></div><div class="row" ng-if="prop.type === \'array\'"><div class="col-md-3"><div class="form-group"><label for="property-item-min-{{ view.uniqueId }}" class="control-label">Min</label><input type="number" class="form-control" id="property-item-min-{{ view.uniqueId }}" name="{{ name }}-item-min" ng-model="prop.minItems" min="0"></div></div><!-- END Min --><div class="col-md-3"><div class="form-group"><label for="property-item-max-{{ view.uniqueId }}" class="control-label">Max</label><input type="number" class="form-control" id="property-item-max-{{ view.uniqueId }}" name="{{ name }}-item-max" ng-model="prop.maxItems" min="0"></div></div><!-- END Max --><div class="col-md-3"><div class="form-group"><label for="property-item-type-{{ view.uniqueId }}" class="control-label">Item Type</label><select class="form-control" id="property-item-type-{{ view.uniqueId }}" name="{{ name }}-item-type" ng-model="prop.items.type"><option value>-- choose --</option><option value="file">file</option><option value="directory">directory</option></select></div></div><!-- END Item Type --><div class="col-md-2" ng-if="prop.items.type === \'file\'"><div class="form-group"><label class="control-label">&nbsp;</label><div class="checkbox no-margin"><label><input type="checkbox" ng-model="prop.adapter.listStreamable"> Streamable</label></div></div></div><!-- END Item Streamable --></div></div></div>'),a.put("views/tabs/adapter.html",'<div class="form-group"><label class="control-label">Base Cmd</label><enum ng-model="view.toolForm.adapter.baseCmd" type="string" min="1" is-required="true"></enum></div><div class="form-group"><label for="stdout" class="control-label">Stdout</label><input type="text" class="form-control" id="stdout" name="stdout" ng-model="view.toolForm.adapter.stdout" required></div><legend class="legend-small toggle" ng-class="{active: view.propsExpanded.args}" ng-click="toggleProperties(\'args\')">Arguments <a href ng-click="addItem(\'arg\', $event)" class="btn btn-default"><i class="glyphicon glyphicon-plus"></i></a></legend><argument ng-repeat="(key, argument) in view.toolForm.adapter.args track by $index" ng-model="argument" active="view.active.args[key]" name="{{ key }}" form="forms.toolForm" values-from="view.valuesFrom"></argument>'),a.put("views/tabs/general.html",'<div class="form-group form-group-email" ng-class="{\'has-error\': (forms.toolForm.documentAuthor.$invalid && forms.toolForm.$dirty)}"><label for="documentAuthor" class="control-label">Document Author</label><input type="email" class="form-control" id="documentAuthor" name="documentAuthor" ng-model="view.toolForm.documentAuthor" required></div><legend class="legend-small">Environment</legend><div class="row"><div class="col-md-4"><div class="form-group" ng-class="{\'has-error\': (forms.toolForm.RECtype.$invalid && forms.toolForm.$dirty)}"><label for="type" class="control-label">Type</label><select class="form-control" id="type" name="RECtype" ng-model="view.toolForm.requirements.environment.container.type"><option value="docker">docker</option></select></div></div><div class="col-md-4"><div class="form-group" ng-class="{\'has-error\': (forms.toolForm.RECuri.$invalid && forms.toolForm.$dirty)}"><label for="uri" class="control-label">URI</label><input type="text" class="form-control" id="uri" name="RECuri" ng-model="view.toolForm.requirements.environment.container.uri" required></div></div><div class="col-md-4"><div class="form-group" ng-class="{\'has-error\': (forms.toolForm.RECimageId.$invalid && forms.toolForm.$dirty)}"><label for="uri" class="control-label">Image Id</label><input type="text" class="form-control" id="imageId" name="RECimageId" ng-model="view.toolForm.requirements.environment.container.imageId" required></div></div></div><!-- END Requirements -> Environment --><legend class="legend-small">Resources</legend><div class="row"><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (forms.toolForm.RRcpu.$invalid && forms.toolForm.$dirty)}"><label for="cpu" class="control-label">CPU</label><input type="number" class="form-control" id="cpu" name="RRcpu" ng-model="view.toolForm.requirements.resources.cpu" min="0" required></div></div><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (forms.toolForm.RRmem.$invalid && forms.toolForm.$dirty)}"><label for="mem" class="control-label">Memory</label><input type="number" class="form-control" id="mem" name="RRmem" ng-model="view.toolForm.requirements.resources.mem" min="0" required></div></div><div class="col-md-3"><div class="form-group" ng-class="{\'has-error\': (forms.toolForm.RRdiskSpace.$invalid && forms.toolForm.$dirty)}"><label for="diskSpace" class="control-label">Disk Space</label><input type="number" class="form-control" id="diskSpace" name="RRdiskSpace" ng-model="view.toolForm.requirements.resources.diskSpace" min="0" required></div></div><div class="col-md-3"><div class="form-group"><label for="network" class="control-label">Network</label><select class="form-control" id="network" name="network" ng-model="view.toolForm.requirements.resources.network"><option value="yes">Yes</option><option value="no">No</option></select></div></div></div><div class="form-group" ng-class="{\'has-error\': (forms.toolForm.RplatformFeatures.$invalid && forms.toolForm.$dirty)}"><label class="control-label">Platform Features</label><div class="checkbox" ng-repeat="(key, val) in view.transforms"><label><input type="checkbox" ng-model="view.transforms[key]" ng-change="toggleTransformsList(key)"> {{ key }}</label></div></div><!-- END Requirements -> Resources -->'),a.put("views/tabs/inputs.html",'<legend class="legend-small toggle" ng-class="{active: view.propsExpanded.inputs}" ng-click="toggleProperties(\'inputs\')">Properties <a href ng-click="addItem(\'input\', $event)" class="btn btn-default"><i class="glyphicon glyphicon-plus"></i></a></legend><property-input ng-repeat="(key, property) in view.toolForm.inputs.properties" ng-model="property" active="view.active.inputs[key]" name="{{ key }}" form="forms.toolForm" required-inputs="view.toolForm.inputs.required" transforms="view.toolForm.requirements.platformFeatures"></property-input>'),a.put("views/tabs/outputs.html",'<legend class="legend-small toggle" ng-class="{active: view.propsExpanded.outputs}" ng-click="toggleProperties(\'outputs\')">Properties <a href ng-click="addItem(\'output\', $event)" class="btn btn-default"><i class="glyphicon glyphicon-plus"></i></a></legend><property-output ng-repeat="(key, property) in view.toolForm.outputs.properties" ng-model="property" active="view.active.outputs[key]" name="{{ key }}" form="forms.toolForm" required-inputs="view.toolForm.outputs.required"></property-output>'),a.put("views/tabs/values.html",'<ng-form class="form" name="forms.jobForm" role="form" novalidate><div class="input-container"><input-field ng-repeat="(key, property) in view.toolForm.inputs.properties" ng-model="view.jobForm.inputs[key]" key="{{ key }}" prop="property" form="forms.jobForm"></input-field></div></ng-form>')
}]),angular.module("clicheApp").controller("MasterCtrl",["$scope",function(a){a.view={},a.view.classes=["page"],a.$on("classChange",function(b,c){a.view.classes=c})}]),angular.module("clicheApp").controller("HomeCtrl",["$scope","$timeout","$document","$modal","$templateCache","Header","Data",function(a,b,c,d,e,f,g){f.setActive("home"),a.view={},a.forms={},a.view.tab="general",a.view.trace="tool",a.view.showTrace=!0,a.view.tabViewPath="views/tabs/general.html",a.view.propsExpanded={inputs:!1,outputs:!1,args:!1},a.view.active={inputs:{},outputs:{},args:{}},a.view.toolForm=g.tool,a.view.jobForm=g.job,a.view.valuesFrom={},_.each(a.view.jobForm.allocatedResources,function(b,c){a.view.valuesFrom["#allocatedResources/"+c]=b,a.$watch("view.toolForm.requirements.resources."+c,function(b,d){b!==d&&(a.view.jobForm.allocatedResources[c]=b,a.view.valuesFrom["#allocatedResources/"+c]=b)})}),_.each(a.view.toolForm.inputs.properties,function(b,c){b.required=_.contains(a.view.toolForm.inputs.required,c),_.isUndefined(b.adapter.separator)&&(b.adapter.separator="_"),_.isUndefined(b.adapter.listSeparator)&&(b.adapter.listSeparator="repeat")}),_.each(a.view.toolForm.adapter.args,function(b){_.isUndefined(b.separator)&&(b.separator="_"),_.isUndefined(b.valueFrom)||(b.value=a.view.valuesFrom[b.valueFrom])}),a.view.transforms={"transforms/strip_ext":!1,"transforms/m-suffix":!1},_.each(a.view.toolForm.requirements.platformFeatures,function(b){a.view.transforms[b]=!0}),a.toggleTransformsList=function(b){_.contains(a.view.toolForm.requirements.platformFeatures,b)?_.remove(a.view.toolForm.requirements.platformFeatures,function(a){return b===a}):a.view.toolForm.requirements.platformFeatures.push(b)},a.toggleProperties=function(b){a.view.propsExpanded[b]=!a.view.propsExpanded[b];var c="args"!==b?a.view.toolForm[b].properties:a.view.toolForm.adapter.args;_.each(c,function(c,d){a.view.active[b][d]=a.view.propsExpanded[b]})},a.switchTab=function(b){a.view.tab=b,a.view.tabViewPath="views/tabs/"+b+".html"};var h,i,j=function(){console.log("turnOnDeepWatch"),a.view.command=g.generateCommand(),h=a.$watch("view.toolForm.adapter",function(b,c){b!==c&&(a.view.command=g.generateCommand())},!0),i=a.$watch("view.jobForm.inputs",function(b,c){b!==c&&(a.view.command=g.generateCommand())},!0)},k=function(){console.log("turnOffDeepWatch"),_.isFunction(h)&&h(),_.isFunction(i)&&i()};a.switchTrace=function(b){a.view.trace=b,"console"===b?j():k()},a.toggleTrace=function(){a.view.showTrace=!a.view.showTrace,a.view.showTrace?"console"===a.view.trace&&j():"console"===a.view.trace&&k()},a.addItem=function(b,c){c.stopPropagation(),d.open({template:e.get("views/partials/add-property-"+b+".html"),controller:"AddPropertyCtrl",windowClass:"modal-prop",resolve:{options:function(){return{type:b,platformFeatures:a.view.toolForm.requirements.platformFeatures,valuesFrom:a.view.valuesFrom}}}})}}]),angular.module("clicheApp").controller("LoginCtrl",["$scope","$timeout","$location","Header","User",function(a,b,c,d,e){a.$parent.view.classes.push("login"),d.setActive("home"),a.view={},a.view.loading=!0,a.view.user={},a.view.error="",e.getUser().then(function(d){b(function(){_.isEmpty(d)||c.path("/"),a.view.loading=!1},1e3)}),a.logIn=function(){return a.form.$setDirty(),a.form.$invalid?!1:void e.logIn(a.view.user.email,a.view.user.password).then(function(a){e.setUser(a),c.path("/")},function(b){a.view.error=b})}}]),angular.module("clicheApp").controller("AddPropertyCtrl",["$scope","$modalInstance","Data","options",function(a,b,c,d){switch(a.options=d,a.view={},d.type){case"input":a.view.property={type:"string",adapter:{separator:"_"}};break;case"output":a.view.property={type:"file"};break;case"arg":a.view.property={separator:"_"}}a.addProperty=function(){return a.view.form.$setDirty(),a.view.form.$invalid?!1:(c.addProperty(d.type,a.view.name,a.view.property),void b.close())},a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")},a.changeValueFrom=function(){a.view.property.value=d.valuesFrom[a.view.property.valueFrom]},a.$watch("view.property.value",function(b,c){b===c||_.isEmpty(b)||(a.view.property.valueFrom=null)})}]),angular.module("clicheApp").controller("ModalCtrl",["$scope","$modalInstance","data",function(a,b,c){a.data=c,a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("clicheApp").service("Header",[function(){var a={};return a.active="apps",a.setActive=function(b){a.active=b},a.getActive=function(){return a.active},a}]).directive("header",["$templateCache","$timeout","$route","User","Header",function(a,b,c,d,e){return{restrict:"E",replace:!0,template:a.get("views/partials/header.html"),scope:{},link:function(a){a.view={},a.view.loading=!0,a.view.active=e.getActive(),a.UserMdl=d,a.HeaderService=e,d.getUser().then(function(b){a.view.user=b,a.view.loading=!1}),a.logOut=function(){d.logOut().then(function(){a.view.user={},c.reload()})},a.$watch("HeaderService.active",function(b,c){b!==c&&(a.view.active=b)}),a.$watch("UserMdl.user",function(b,c){b!==c&&(console.log(b),a.view.user=b)})}}}]),angular.module("clicheApp").directive("error",["$templateCache",function(a){return{restrict:"E",replace:!0,template:a.get("views/partials/error.html"),link:function(a){a.errorMessages=[],a.$on("httpError",function(b,c){-1===a.errorMessages.indexOf(c)&&a.errorMessages.push(c)}),a.closeError=function(){a.errorMessages=[]}}}}]),angular.module("clicheApp").directive("height",["$window","$timeout",function(a,b){return{link:function(c,d){var e=function(){var a=d[0].parentNode.offsetHeight-(c.header+c.footer);d[0].style.height=a+"px"},f=function(){c.header=d[0].parentNode.children[0].offsetHeight,c.footer=angular.isDefined(d[0].parentNode.children[2])?d[0].parentNode.children[2].offsetHeight:0},g=b(function(){f(),e()}),h=_.debounce(e,150);angular.element(a).on("resize",h),d.on("$destroy",function(){angular.element(a).off("resize",h),angular.isDefined(g)&&(b.cancel(g),g=void 0)}),c.$watch("view.tab",function(a,b){a!==b&&(f(),e())})}}}]),angular.module("clicheApp").directive("loading",["$timeout",function(a){return{scope:{ngClass:"=",loading:"="},link:function(b){var c,d=b.ngClass;d.push("loading"),d.push("loading-fade"),b.$watch("loading",function(e,f){e!==f&&(b.stopLoadingDelay(),_.remove(d,function(a){return"loading-fade"===a}),b.$emit("classChange",d),c=a(function(){_.remove(d,function(a){return"loading"===a}),b.$emit("classChange",d)},300))}),b.stopLoadingDelay=function(){angular.isDefined(c)&&(a.cancel(c),c=void 0)},b.$on("$destroy",function(){b.stopLoadingDelay()})}}}]),angular.module("clicheApp").directive("ioFile",["$templateCache",function(a){return{restrict:"E",replace:!0,template:a.get("views/partials/io-file.html"),scope:{file:"=ngModel",form:"=",name:"@"},link:function(a){console.log(a.file)}}}]),angular.module("clicheApp").directive("propertyInput",["$templateCache","$modal","Data",function(a,b,c){var d=0;return{restrict:"E",replace:!0,template:a.get("views/partials/property-input.html"),scope:{name:"@",prop:"=ngModel",active:"=",requiredInputs:"=",transforms:"=",form:"="},link:function(e){e.view={},d++,e.view.uniqueId=d,e.view.isEnum=_.isArray(e.prop.enum),e.toggleProperty=function(){e.active=!e.active},e.toggleEnum=function(){e.prop.enum=e.view.isEnum?[""]:null},e.removeItem=function(d){d.stopPropagation();var f=b.open({template:a.get("views/partials/confirm-delete.html"),controller:"ModalCtrl",windowClass:"modal-confirm",resolve:{data:function(){return{}}}});f.result.then(function(){c.deleteProperty("input",e.name)})}}}}]),angular.module("clicheApp").directive("propertyOutput",["$templateCache","$modal","Data",function(a,b,c){var d=0;return{restrict:"E",replace:!0,template:a.get("views/partials/property-output.html"),scope:{name:"@",prop:"=ngModel",active:"=",requiredInputs:"=",form:"="},link:function(e){e.view={},d++,e.view.uniqueId=d,e.view.isEnum=_.isArray(e.prop.enum),e.toggleProperty=function(){e.active=!e.active},e.removeItem=function(d){d.stopPropagation();var f=b.open({template:a.get("views/partials/confirm-delete.html"),controller:"ModalCtrl",windowClass:"modal-confirm",resolve:{data:function(){return{}}}});f.result.then(function(){c.deleteProperty("output",e.name)})}}}}]),angular.module("clicheApp").directive("enum",["$templateCache",function(a){return{restrict:"E",replace:!0,template:a.get("views/partials/enum.html"),scope:{model:"=ngModel",type:"=",min:"=",max:"=",isRequired:"="},link:function(a){a.list=[],_.isArray(a.model)||isNaN(a.min)?_.each(a.model,function(b){a.list.push({value:b})}):_.times(a.min,function(){a.list.push({value:""})}),a.addItem=function(){return a.max&&a.list.length>=a.max?!1:void a.list.push({value:""})},a.removeItem=function(b){return a.min&&a.list.length<=a.min?!1:void a.list.splice(b,1)},a.$watch("list",function(b,c){b!==c&&(a.model=_.pluck(b,"value"))},!0)}}}]),angular.module("clicheApp").directive("inputField",["$templateCache","$compile",function(a,b){var c=0;return{restrict:"E",replace:!0,template:a.get("views/partials/input-field.html"),scope:{input:"=ngModel",prop:"=",key:"@",form:"="},link:function(d,e){d.view={},c++,d.view.uniqueId=c;var f=a.get("views/inputs/input-"+d.prop.type+".html");e.append(f),b(e.contents())(d)}}}]),angular.module("clicheApp").directive("argument",["$templateCache","$modal","Data",function(a,b,c){var d=0;return{restrict:"E",replace:!0,template:a.get("views/partials/argument.html"),scope:{name:"@",arg:"=ngModel",active:"=",form:"=",valuesFrom:"="},link:function(e){e.view={},d++,e.view.uniqueId=d,_.isUndefined(e.arg.valueFrom)||(e.arg.value=e.valuesFrom[e.arg.valueFrom]),e.toggleArgument=function(){e.active=!e.active},e.changeValueFrom=function(){e.arg.value=e.valuesFrom[e.arg.valueFrom]},e.$watch("arg.value",function(a,b){a===b||_.isEmpty(a)||(e.arg.valueFrom=null)}),e.removeItem=function(d){d.stopPropagation();var f=b.open({template:a.get("views/partials/confirm-delete.html"),controller:"ModalCtrl",windowClass:"modal-confirm",resolve:{data:function(){return{}}}});f.result.then(function(){c.deleteProperty("arg",e.name)})}}}}]),angular.module("clicheApp").filter("isEmpty",[function(){return function(a){return _.isEmpty(a)}}]),angular.module("clicheApp").filter("trim",[function(){return function(a){return a.trim()}}]),angular.module("clicheApp").filter("contains",[function(){return function(a,b){return _.contains(a,b)}}]),angular.module("clicheApp").factory("Api",["$resource","$http","$q","$cacheFactory",function(a,b,c,d){var e=d("user");e.put("user",{});var f="",g={};return g.user={get:function(){var a=c.defer(),b=e.get("user");return a.resolve(b),{$promise:a.promise}},login:function(a){var b=c.defer(),d=_.random(0,1);if(d)b.reject("Email or password is wrong, please try again.");else{var f={email:a,name:"Test User"};e.put("user",f),b.resolve(f)}return{$promise:b.promise}},logout:function(){var a=c.defer();return e.put("user",{}),a.resolve(),{$promise:a.promise}},restart:function(){var a=c.defer(),b=_.random(0,1);return b?a.reject("There was a problem while restarting Cliche, please try again."):a.resolve(),{$promise:a.promise}}},g.token=a(f+"/token",{},{generate:{method:"POST"},revoke:{method:"DELETE"}}),g}]),angular.module("clicheApp").factory("HTTPInterceptor",["$q","$rootScope","$location",function(a,b,c){c.protocol()+"://"+c.host();return{request:function(b){return b||a.when(b)},requestError:function(c){return b.$broadcast("httpError","An error occurred while attempting to send request to "+c.config.url),a.reject(c)},response:function(b){return b||a.when(b)},responseError:function(c){var d=_.isEmpty(c.data.message)?"An error occurred while attempting to retrieve response from "+c.config.url:c.data.message;return b.$broadcast("httpError",d),a.reject(c)}}}]),angular.module("clicheApp").factory("Data",[function(){var a={};return a.tool={softwareDescription:"",documentAuthor:"author@gmail.com",requirements:{environment:{container:{type:"docker",uri:"uri",imageId:"imageId"}},resources:{cpu:0,mem:5e3,ports:[],diskSpace:0,network:"no"},platformFeatures:["transforms/strip_ext","transforms/m-suffix"]},inputs:{type:"object",required:["reference","reads"],properties:{reference:{type:"file",adapter:{order:2,transform:"transforms/strip_ext"}},reads:{type:"array",minItems:1,maxItems:2,items:{type:"file"},adapter:{order:3,streamable:!0}},minimum_seed_length:{type:"integer",adapter:{order:1,prefix:"-m",separator:"_"}},min_std_max_min:{type:"array",minItems:1,maxItems:4,items:{type:"number"},adapter:{order:1,prefix:"-I",listSeparator:","}}}},outputs:{type:"object",required:["sam"],properties:{sam:{type:"file",adapter:{streamable:!0,glob:"output.sam"}}}},adapter:{baseCmd:["bwa"],stdout:"output.sam",args:[{order:0,value:"mem"},{order:1,prefix:"-t",valueFrom:"#allocatedResources/cpu"}]}},a.job={inputs:{},allocatedResources:{cpu:4,mem:3e3,ports:[],diskSpace:2e4,network:"No"}},a.addProperty=function(b,c,d){switch(b){case"input":a.tool.inputs.properties[c]=d;break;case"output":a.tool.outputs.properties[c]=d;break;case"arg":a.tool.adapter.args.push(d)}},a.deleteProperty=function(b,c){switch(b){case"input":delete a.tool.inputs.properties[c];break;case"output":delete a.tool.outputs.properties[c];break;case"arg":a.tool.adapter.args.splice(c,1)}},a.applyTransform=function(a,b){var c;switch(a){case"transforms/strip_ext":var d=b.split(".");d[0]&&(c=d[0]);break;case"transforms/m-suffix":c="M"+b;break;default:c=b}return c},a.generateCommand=function(){var b=[],c=[],d=[];_.each(a.tool.inputs.properties,function(c,d){if(!_.isUndefined(a.job.inputs[d])){var e,f=_.isUndefined(c.adapter.prefix)?"":c.adapter.prefix,g=_.isUndefined(c.adapter.separator)||"_"===c.adapter.separator?" ":c.adapter.separator;if((_.isUndefined(c.adapter.listSeparator)||"_"===c.adapter.listSeparator)&&(c.adapter.listSeparator=" "),"array"===c.type){var h="repeat"===c.adapter.listSeparator?" "+f+g:c.adapter.listSeparator,i=[];_.each(a.job.inputs[d],function(b){i.push(a.applyTransform(c.adapter.listTransform,b))}),e=i.join(h)}else e="file"===c.type?a.applyTransform(c.adapter.transform,a.job.inputs[d].path):a.applyTransform(c.adapter.transform,a.job.inputs[d]);b.push(_.merge({key:d,order:c.adapter.order,value:e,prefix:f,separator:c.adapter.separator},c))}}),_.each(a.tool.adapter.args,function(a,b){var d=_.isUndefined(a.prefix)?"":a.prefix;c.push(_.merge({key:"arg"+b,order:a.order,prefix:d},a))});var e=_.sortBy(b.concat(c),"order");_.each(e,function(a){var b=_.isUndefined(a.separator)||"_"===a.separator?""===a.prefix?"":" ":""===a.prefix?"":a.separator,c=_.isUndefined(a.value)?"":a.value;d.push(a.prefix+b+c)});var f=a.tool.adapter.baseCmd.join(" ")+" "+d.join(" ")+" > "+a.tool.adapter.stdout;return f},a}]),angular.module("clicheApp").factory("User",["Api",function(a){var b={};return b.user={},b.getUser=function(){var b=a.user.get().$promise;return b},b.setUser=function(a){b.user=a},b.logIn=function(b,c){var d=a.user.login({email:b,password:c}).$promise;return d},b.logOut=function(){var b=a.user.logout().$promise;return b},b.restart=function(){var b=a.user.restart().$promise;return b},b.getToken=function(){var b=a.token.get().$promise;return b},b.generateToken=function(){var b=a.token.generate().$promise;return b},b.revokeToken=function(){var b=a.token.revoke().$promise;return b},b.parseUser=function(a){var b=["avatar_url","gravatar_id","html_url","name"],c={};return _.each(b,function(b){angular.isDefined(a[b])&&(c[b]=a[b])}),c},b}]);